;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Zniggy the Znig
; Copyright 2019 anonymous
; 4chan /vr/ board
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 
; ZX Spectrum Memory Map
; 0x0000 - 0x3FFF RESERVED: basic ROM
; 0x4000 - 0x57FF RAM: Screen 256x192 1bpp
; 0x5800 - 0x5AFF RAM: 8x8 color cells 32x24
; 0x5B00 - 0x5BFF RESERVED: Printer Buffer (?)
; 0x5C00 - 0x5CBF RESERVED: System variables (?)
; 0x5CC0 - 0x5CCA RESERVED: ???
; 0x5CCB - 0xFF57 FREE RAM OUR GAME
; 0xFF58 - 0xFFFF RESERVED: ???
 
org $8200
 
;==============================================================
; Defines
;==============================================================
 
SCREEN_PIXEL_START          equ $4000
SCREEN_PIXEL_SIZE           equ $1800
 
SCREEN_ATTRIBUTE_START      equ $5800
SCREEN_ATTRIBUTE_SIZE       equ $0300
 
SCREEN_BORDER_COLOR         equ $FE ; Last 3 bits defines color
 
BLACK_INK                   equ $00
BLUE_INK                    equ $01
RED_INK                     equ $02
PURPLE_INK                  equ $03
GREEN_INK                   equ $04
CYAN_INK                    equ $05
YELLOW_INK                  equ $06
WHITE_INK                   equ $07
 
BLACK_PAPER                 equ BLACK_INK << 3
BLUE_PAPER                  equ BLUE_INK << 3
RED_PAPER                   equ RED_INK << 3
PURPLE_PAPER                equ PURPLE_INK << 3
GREEN_PAPER                 equ GREEN_INK << 3
CYAN_PAPER                  equ CYAN_INK << 3
YELLOW_PAPER                equ YELLOW_INK << 3
WHITE_PAPER                 equ WHITE_INK << 3
 
FLASH                       equ $80
BRIGHT                      equ $40
 
BLOCK_COLLISION             equ $01
BLOCK_COLLISION_BIT         equ 0
BLOCK_LADDER                equ $02
BLOCK_LADDER_BIT            equ 1

 
SCRATCH_ADDRESS1            equ $5CCB
SCRATCH_ADDRESS2            equ $5CCD
SCRATCH_ADDRESS3            equ $5CD3
SCRATCH_ADDRESS4            equ $5CD5
CURRENT_ROOM_ADDRESS        equ $5CCE
CURRENT_ROOM_NUMBER         equ $5CD0
CURRENT_ROOM_GEMS           equ $5CF0
CURRENT_SPRITE              equ $5CD4
SPRITE_LENGTH               equ $5CD2
BUG_COUNT                   equ $5FFF
WALKER_COUNT                equ $5FFE

COLLECTED_GEMS              equ $60A0
GEM_COLOR                   equ $5EFF

PLAYER_POS                  equ $5D00
PLAYER_X                    equ $5D00
PLAYER_Y                    equ $5D01
PLAYER_VEL                  equ $5D02
PLAYER_ANIM                 equ $5D03
PLAYER_SPRITE               equ $5D04
PLAYER_GEMS                 equ $5D06
PLAYER_ENTRY_X              equ $5D07
PLAYER_ENTRY_Y              equ $5D08

SPRITE_SIZE_8X8             equ 0
SPRITE_SIZE_16X8            equ 8
SPRITE_SIZE_8X16            equ 8
SPRITE_SIZE_16X16           equ 24
SPRITE_SIZE_24X8            equ 16
SPRITE_LOOKUP_OFFSET        equ 1
SPRITE_WIDTH_OFFSET         equ 2
SPRITE_HEIGHT_OFFSET        equ 3
SPRITE_DATA_SIZE            equ 4

MONSTER_START               equ $6100
MONSTER_POS                 equ $6100
MONSTER_X                   equ $6100
MONSTER_Y                   equ $6101
MONSTER_SPRITE              equ $6102
MONSTER_DIR                 equ $6104
MONSTER_SIZE                equ 8

MONSTER_POS_OFFSET          equ 0
MONSTER_X_OFFSET            equ 0
MONSTER_Y_OFFSET            equ 1
MONSTER_SPRITE_OFFSET       equ 2
MONSTER_DIR_OFFSET          equ 4
MONSTER_WIDTH_OFFSET        equ 6
MONSTER_BWIDTH_OFFSET       equ 5
MONSTER_HEIGHT_OFFSET       equ 7

ROOM_WIDTH                  equ 32
ROOM_HEIGHT                 equ 18
ROOM_SIZE                   equ 32*18
SCREEN_HEIGHT               equ 24
MAP_WIDTH                   equ 8

ROOM_START                  equ $6B00
ROOM_END                    equ $6D41

ROOM_BITS                   equ %00111111

CHAR_A equ 33
CHAR_B equ 34
CHAR_C equ 35
CHAR_D equ 36
CHAR_E equ 37
CHAR_F equ 38
CHAR_G equ 39
CHAR_H equ 40
CHAR_I equ 41
CHAR_J equ 42
CHAR_K equ 43
CHAR_L equ 44
CHAR_M equ 45
CHAR_N equ 46
CHAR_O equ 47
CHAR_P equ 48
CHAR_Q equ 49
CHAR_R equ 50
CHAR_S equ 51
CHAR_T equ 52
CHAR_U equ 53
CHAR_V equ 54
CHAR_W equ 55
CHAR_X equ 56
CHAR_Y equ 57
CHAR_Z equ 58
CHAR_COLON equ 26
CHAR_SQ equ 7
CHAR_SPACE equ 97
CHAR_ZERO equ 16
LC equ 32


;==============================================================
; Data
;==============================================================
SPRITE_LOOKUP:
db 0,8,16,24,32,48,56,64
db 0,16,32,48,64,80,96,128
db 0,24,48,72,96,120,144,168
db 0,32,64,96,128,160,192,224

SWAP_BIT:
db 0

soundstart:
db 0, 0, 0, 0, 0, 0, 231, 0, 231, 0, 207, 0, 207, 16, 207, 0, 239
db 16, 231, 0, 255, 0, 247, 0, 247, 8, 243, 8, 247, 8, 243, 8, 243, 12
db 241, 12, 243, 14, 241, 12, 241, 14, 241, 8, 241, 15, 241, 0, 243, 143, 241
db 0, 241, 143, 241, 8, 240, 143, 240, 12, 240, 143, 240, 14, 112, 207, 112, 15
db 48, 239, 240, 143, 16, 255, 240, 199, 0, 255, 240, 227, 0, 225, 240, 195, 192
db 225, 241, 225, 224, 225, 241, 44, 48, 15, 135, 0, 240, 14, 31, 240, 110, 16
db 232, 255, 1, 112, 135, 110, 240, 135, 8, 179, 239, 8, 243, 14, 126, 241, 15
db 112, 78, 239, 240, 142, 16, 137, 159, 48, 7, 48, 143, 255, 112, 15, 48, 15
db 223, 241, 12, 224, 14, 191, 247, 0, 99, 16, 159, 255, 240, 0, 242, 0, 127
db 255, 16, 13, 241, 0, 239, 255, 16, 8, 240, 0, 8, 255, 112, 0, 6, 96
db 0, 143, 255, 247, 0, 14, 112, 0, 12, 255, 241, 0, 13, 48, 0, 14, 255
db 241, 0, 14, 113, 0, 15, 255, 112, 0, 15, 208, 0, 15, 255, 112, 0, 143
db 0, 0, 15, 255, 112, 0, 231, 0, 0, 207, 255, 16, 0, 229, 0, 0, 255
db 247, 0, 0, 0, 0, 143, 255, 48, 0, 0, 0, 143, 255, 16, 0, 0, 8
db 247, 0, 143, 48, 8, 255, 48, 143, 80, 4, 239, 240, 14, 112, 4, 207, 240
db 15, 48, 2, 255, 176, 143, 32, 78, 247, 16, 245, 0, 239, 49, 175, 112, 14
db 241, 12, 225, 8, 239, 32, 175, 48, 143, 112, 15, 112, 15, 242, 8, 113, 15
db 243, 8, 73, 15, 123, 32, 41, 175, 97, 36, 165, 135, 148, 80, 80, 239, 74
db 40, 0, 247, 36, 12, 25, 242, 146, 10, 9, 231, 82, 72, 41, 228, 178, 18
db 82, 219, 89, 73, 73, 10, 107, 74, 66, 0, 135, 20, 0, 1, 1, 128, 0
db 152, 0, 0, 0, 0, 16, 10, 0, 12, 180, 17, 64, 0, 1, 0, 8, 0
db 0, 0, 0, 0, 0, 162, 128, 160, 0, 16, 2, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 1, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 16, 0, 0
db 0, 0, 0, 0, 0, 32, 64, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 16, 1, 0, 65, 0, 4, 128, 128, 10, 2, 0, 0, 0, 1, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 144, 0
db 0, 67, 0, 0, 0, 8, 72, 0, 0, 0, 0, 0, 164, 132, 239, 48, 0
db 0, 0, 8, 255, 255, 0, 0, 0, 0, 231, 191, 255, 0, 0, 0, 12, 191
db 255, 240, 0, 0, 0, 15, 255, 247, 0, 0, 0, 14, 255, 255, 80, 0, 0
db 0, 255, 255, 112, 0, 0, 0, 143, 255, 210, 0, 64, 0, 15, 255, 64, 0
db 96, 0, 207, 255, 0, 15, 96, 14, 255, 16, 12, 240, 0, 255, 112, 8, 243
db 0, 239, 112, 0, 243, 0, 255, 48, 8, 241, 8, 255, 0, 15, 112, 15, 243
db 0, 255, 0, 239, 112, 14, 241, 12, 247, 0, 207, 16, 143, 112, 12, 241, 14
db 247, 0, 239, 16, 239, 48, 14, 240, 15, 243, 12, 243, 0, 255, 48, 239, 16
db 111, 241, 14, 241, 6, 255, 16, 239, 16, 255, 241, 15, 240, 15, 255, 0, 255
db 8, 223, 240, 143, 112, 204, 247, 0, 135, 12, 252, 241, 6, 96, 6, 64, 0
db 114, 0, 0, 0, 0, 96, 0, 38, 201, 19, 207, 243, 127, 251, 22, 47, 1
db 0, 177, 0, 0, 0, 1, 8, 128, 0, 209, 10, 241, 48, 3, 64, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
db 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 108, 132, 128, 20, 1, 10, 93
db 202, 19, 145, 225, 170, 240, 94, 68, 221, 144, 137, 255, 48, 0, 4, 239, 48
db 206, 12, 62, 241, 7, 96, 217, 243, 14, 17, 228, 231, 12, 112, 193, 207, 30
db 240, 7, 143, 60, 243, 12, 30, 240, 255, 6, 192, 243, 143, 120, 54, 207, 28
db 243, 129, 62, 112, 255, 4, 192, 243, 139, 112, 7, 143, 6, 195, 0, 12, 120
db 62, 16, 6, 241, 224, 32, 0, 143, 247, 0, 0, 14, 255, 16, 0, 8, 255
db 112, 0, 0, 239, 241, 0, 0, 143, 255, 0, 0, 14, 255, 48, 0, 0, 255
db 241, 0, 0, 207, 247, 0, 0, 15, 255, 16, 0, 12, 255, 240, 0, 0, 239
db 243, 0, 0, 143, 255, 16, 0, 12, 255, 240, 0, 0, 239, 247, 0, 0, 143
db 255, 112, 0, 8, 255, 247, 0, 0, 143, 255, 112, 0, 12, 255, 247, 0, 0
db 127, 241, 135, 0, 0, 243, 60, 7, 0, 0, 96, 143, 4, 0, 76, 15, 243
db 0, 208, 20, 8, 4, 180, 36, 12, 228, 3, 183, 231, 9, 242, 58, 244, 241
db 151, 149, 203, 150, 47, 49, 12, 51, 98, 153, 141, 105, 144, 51, 185, 221, 173
db 207, 55, 137, 99, 222, 102, 92, 96, 11, 132, 180, 44, 64, 201, 210, 156, 204
db 224, 6, 33, 243, 29, 157, 64, 200, 183, 1, 25, 159, 241, 225, 70, 137, 24
db 252, 118, 12, 241, 227, 78, 16, 15, 255, 56, 185, 184, 141, 200, 48, 230, 102
db 71, 96, 7, 192, 129, 19, 39, 14, 27, 6, 16, 0, 0, 15, 241, 96, 24
db 0, 0, 207, 112, 97, 0, 0, 8, 241, 0, 0, 0, 0, 255, 24, 251, 0
db 32, 111, 80, 199, 0, 0, 143, 113, 14, 120, 0, 143, 112, 4, 56, 16, 207
db 48, 0, 189, 64, 239, 0, 0, 143, 190, 243, 0, 0, 255, 255, 240, 0, 110
db 255, 247, 0, 0, 239, 255, 16, 0, 15, 255, 112, 0, 14, 255, 112, 0, 14
db 255, 240, 0, 14, 255, 240, 0, 15, 255, 48, 0, 207, 247, 0, 8, 255, 50
db 34, 12, 255, 0, 177, 15, 240, 14, 48, 239, 16, 247, 12, 243, 14, 240, 143
db 16, 203, 8, 243, 12, 241, 15, 240, 143, 16, 247, 8, 243, 15, 177, 15, 56
db 255, 16, 179, 13, 241, 11, 48, 223, 48, 181, 13, 243, 14, 240, 143, 48, 239
db 8, 247, 4, 241, 15, 240, 134, 48, 255, 64, 194, 10, 249, 64, 96, 143, 57
db 68, 8, 247, 41, 0, 15, 244, 41, 0, 239, 189, 33, 12, 239, 107, 16, 2
db 246, 181, 0, 141, 99, 215, 16, 140, 98, 191, 0, 8, 64, 127, 16, 0, 191
db 189, 48, 4, 47, 211, 241, 0, 15, 122, 94, 0, 10, 255, 111, 0, 0, 231
db 189, 176, 0, 143, 212, 240, 0, 14, 123, 117, 0, 12, 255, 177, 16, 2, 255
db 218, 0, 4, 207, 189, 128, 0, 143, 246, 80, 0, 46, 253, 100, 0, 12, 247
db 178, 0, 1, 255, 83, 32, 128, 207, 189, 16, 8, 143, 246, 81, 0, 43, 255
db 100, 0, 4, 247, 177, 0, 1, 207, 246, 0, 4, 143, 251, 32, 0, 30, 255
db 96, 0, 72, 255, 177, 16, 1, 207, 189, 16, 8, 15, 247, 18, 0, 41, 247
db 178, 0, 1, 199, 181, 16, 8, 14, 253, 32, 0, 0, 251, 210, 0, 2, 143
db 255, 64, 0, 136, 223, 123, 0, 0, 175, 255, 244, 0, 72, 251, 255, 49, 0
db 14, 255, 223, 112, 0, 14, 41, 140, 48, 0, 0, 0, 13, 96, 0, 0, 0


soundend:
db 0

DATA_LIVES_STRING:
db CHAR_Z, CHAR_N, CHAR_I, CHAR_G, CHAR_S, CHAR_COLON
PLAYER_LIVES:
db CHAR_ZERO + 9, 0
DATA_GEMS_STRING:
db CHAR_G, CHAR_E, CHAR_M, CHAR_S, CHAR_COLON
PLAYER_GEM_TEXT:
db CHAR_ZERO + 0, CHAR_ZERO + 9, 0

DATA_TILE_PIXELS:

DATA_SPRITES:
DATA_ZIGGY_RIGHT:
db BLACK_PAPER | PURPLE_INK | BRIGHT
db SPRITE_SIZE_16X16, 2, 16
; zniggy_0
db %00011000>>0, %00011000<<8
db %00111100>>0, %00111100<<8
db %01111010>>0, %01111010<<8
db %11111111>>0, %11111111<<8
db %01110000>>0, %01110000<<8
db %00111100>>0, %00111100<<8
db %00011000>>0, %00011000<<8
db %00111100>>0, %00111100<<8

db %01111110>>0, %01111110<<8
db %11111111>>0, %11111111<<8
db %01111110>>0, %01111110<<8
db %00111100>>0, %00111100<<8
db %00011000>>0, %00011000<<8
db %00011000>>0, %00011000<<8
db %00011000>>0, %00011000<<8
db %00011110>>0, %00011110<<8
; zniggy_1
db %00011000>>1, %00011000<<7
db %00111100>>1, %00111100<<7
db %01111010>>1, %01111010<<7
db %11111111>>1, %11111111<<7
db %01110000>>1, %01110000<<7
db %00111100>>1, %00111100<<7
db %00011000>>1, %00011000<<7
db %00111100>>1, %00111100<<7

db %01111110>>1, %01111110<<7
db %11111111>>1, %11111111<<7
db %01111110>>1, %01111110<<7
db %00111100>>1, %00111100<<7
db %00011000>>1, %00011000<<7
db %01101100>>1, %01101100<<7
db %10000111>>1, %10000111<<7
db %01000000>>1, %01000000<<7
; zniggy_2
db %00011000>>2, %00011000<<6
db %00111100>>2, %00111100<<6
db %01111010>>2, %01111010<<6
db %11111111>>2, %11111111<<6
db %01110000>>2, %01110000<<6
db %00111100>>2, %00111100<<6
db %00011000>>2, %00011000<<6
db %00111100>>2, %00111100<<6

db %01111110>>2, %01111110<<6
db %11111111>>2, %11111111<<6
db %01111110>>2, %01111110<<6
db %00111100>>2, %00111100<<6
db %00011000>>2, %00011000<<6
db %00101001>>2, %00101001<<6
db %01000110>>2, %01000110<<6
db %10000100>>2, %10000100<<6
; zniggy_3
db %00011000>>3, %00011000<<5
db %00111100>>3, %00111100<<5
db %01111010>>3, %01111010<<5
db %11111111>>3, %11111111<<5
db %01110000>>3, %01110000<<5
db %00111100>>3, %00111100<<5
db %00011000>>3, %00011000<<5
db %00111100>>3, %00111100<<5

db %01111110>>3, %01111110<<5
db %11111111>>3, %11111111<<5
db %01111110>>3, %01111110<<5
db %00111100>>3, %00111100<<5
db %00011000>>3, %00011000<<5
db %00101000>>3, %00101000<<5
db %01010000>>3, %01010000<<5
db %01011110>>3, %01011110<<5

; zniggy_4
db %00011000>>4, %00011000<<4
db %00111100>>4, %00111100<<4
db %01111010>>4, %01111010<<4
db %11111111>>4, %11111111<<4
db %01110000>>4, %01110000<<4
db %00111100>>4, %00111100<<4
db %00011000>>4, %00011000<<4
db %00111100>>4, %00111100<<4

db %01111110>>4, %01111110<<4
db %11111111>>4, %11111111<<4
db %01111110>>4, %01111110<<4
db %00111100>>4, %00111100<<4
db %00011000>>4, %00011000<<4
db %00011000>>4, %00011000<<4
db %00011000>>4, %00011000<<4
db %00011110>>4, %00011110<<4
; zniggy_5
db %00011000>>5, %00011000<<3
db %00111100>>5, %00111100<<3
db %01111010>>5, %01111010<<3
db %11111111>>5, %11111111<<3
db %01110000>>5, %01110000<<3
db %00111100>>5, %00111100<<3
db %00011000>>5, %00011000<<3
db %00111100>>5, %00111100<<3

db %01111110>>5, %01111110<<3
db %11111111>>5, %11111111<<3
db %01111110>>5, %01111110<<3
db %00111100>>5, %00111100<<3
db %00011000>>5, %00011000<<3
db %01101100>>5, %01101100<<3
db %10000111>>5, %10000111<<3
db %01000000>>5, %01000000<<3
; zniggy_6
db %00011000>>6, %00011000<<2
db %00111100>>6, %00111100<<2
db %01111010>>6, %01111010<<2
db %11111111>>6, %11111111<<2
db %01110000>>6, %01110000<<2
db %00111100>>6, %00111100<<2
db %00011000>>6, %00011000<<2
db %00111100>>6, %00111100<<2

db %01111110>>6, %01111110<<2
db %11111111>>6, %11111111<<2
db %01111110>>6, %01111110<<2
db %00111100>>6, %00111100<<2
db %00011000>>6, %00011000<<2
db %00101001>>6, %00101001<<2
db %01000110>>6, %01000110<<2
db %10000100>>6, %10000100<<2
; zniggy_7
db %00011000>>7, %00011000<<1
db %00111100>>7, %00111100<<1
db %01111010>>7, %01111010<<1
db %11111111>>7, %11111111<<1
db %01110000>>7, %01110000<<1
db %00111100>>7, %00111100<<1
db %00011000>>7, %00011000<<1
db %00111100>>7, %00111100<<1

db %01111110>>7, %01111110<<1
db %11111111>>7, %11111111<<1
db %01111110>>7, %01111110<<1
db %00111100>>7, %00111100<<1
db %00011000>>7, %00011000<<1
db %00101000>>7, %00101000<<1
db %01010000>>7, %01010000<<1
db %01011110>>7, %01011110<<1



DATA_ZIGGY_LEFT:
db BLACK_PAPER | PURPLE_INK | BRIGHT
db SPRITE_SIZE_16X16, 2, 16
; zniggy_0
db %00011000>>0, %00011000<<8
db %00111100>>0, %00111100<<8
db %01011110>>0, %01011110<<8
db %11111111>>0, %11111111<<8
db %00001110>>0, %00001110<<8
db %00111100>>0, %00111100<<8
db %00011000>>0, %00011000<<8
db %00111100>>0, %00111100<<8

db %01111110>>0, %01111110<<8
db %11111111>>0, %11111111<<8
db %01111110>>0, %01111110<<8
db %00111100>>0, %00111100<<8
db %00011000>>0, %00011000<<8
db %00011000>>0, %00011000<<8
db %00011000>>0, %00011000<<8
db %01111000>>0, %01111000<<8
; zniggy_1
db %00011000>>1, %00011000<<7
db %00111100>>1, %00111100<<7
db %01011110>>1, %01011110<<7
db %11111111>>1, %11111111<<7
db %00001110>>1, %00001110<<7
db %00111100>>1, %00111100<<7
db %00011000>>1, %00011000<<7
db %00111100>>1, %00111100<<7

db %01111110>>1, %01111110<<7
db %11111111>>1, %11111111<<7
db %01111110>>1, %01111110<<7
db %00111100>>1, %00111100<<7
db %00011000>>1, %00011000<<7
db %00110110>>1, %00110110<<7
db %11100001>>1, %11100001<<7
db %00000010>>1, %00000010<<7
; zniggy_2
db %00011000>>2, %00011000<<6
db %00111100>>2, %00111100<<6
db %01011110>>2, %01011110<<6
db %11111111>>2, %11111111<<6
db %00001110>>2, %00001110<<6
db %00111100>>2, %00111100<<6
db %00011000>>2, %00011000<<6
db %00111100>>2, %00111100<<6

db %01111110>>2, %01111110<<6
db %11111111>>2, %11111111<<6
db %01111110>>2, %01111110<<6
db %00111100>>2, %00111100<<6
db %00011000>>2, %00011000<<6
db %10010100>>2, %10010100<<6
db %01100010>>2, %01100010<<6
db %00100001>>2, %00100001<<6
; zniggy_3
db %00011000>>3, %00011000<<5
db %00111100>>3, %00111100<<5
db %01011110>>3, %01011110<<5
db %11111111>>3, %11111111<<5
db %00001110>>3, %00001110<<5
db %00111100>>3, %00111100<<5
db %00011000>>3, %00011000<<5
db %00111100>>3, %00111100<<5

db %01111110>>3, %01111110<<5
db %11111111>>3, %11111111<<5
db %01111110>>3, %01111110<<5
db %00111100>>3, %00111100<<5
db %00011000>>3, %00011000<<5
db %00010100>>3, %00010100<<5
db %00001010>>3, %00001010<<5
db %01111010>>3, %01111010<<5

; zniggy_4
db %00011000>>4, %00011000<<4
db %00111100>>4, %00111100<<4
db %01011110>>4, %01011110<<4
db %11111111>>4, %11111111<<4
db %00001110>>4, %00001110<<4
db %00111100>>4, %00111100<<4
db %00011000>>4, %00011000<<4
db %00111100>>4, %00111100<<4

db %01111110>>4, %01111110<<4
db %11111111>>4, %11111111<<4
db %01111110>>4, %01111110<<4
db %00111100>>4, %00111100<<4
db %00011000>>4, %00011000<<4
db %00011000>>4, %00011000<<4
db %00011000>>4, %00011000<<4
db %01111000>>4, %01111000<<4
; zniggy_5
db %00011000>>5, %00011000<<3
db %00111100>>5, %00111100<<3
db %01011110>>5, %01011110<<3
db %11111111>>5, %11111111<<3
db %00001110>>5, %00001110<<3
db %00111100>>5, %00111100<<3
db %00011000>>5, %00011000<<3
db %00111100>>5, %00111100<<3

db %01111110>>5, %01111110<<3
db %11111111>>5, %11111111<<3
db %01111110>>5, %01111110<<3
db %00111100>>5, %00111100<<3
db %00011000>>5, %00011000<<3
db %00110110>>5, %00110110<<3
db %11100001>>5, %11100001<<3
db %00000010>>5, %00000010<<3
; zniggy_6
db %00011000>>6, %00011000<<2
db %00111100>>6, %00111100<<2
db %01011110>>6, %01011110<<2
db %11111111>>6, %11111111<<2
db %00001110>>6, %00001110<<2
db %00111100>>6, %00111100<<2
db %00011000>>6, %00011000<<2
db %00111100>>6, %00111100<<2

db %01111110>>6, %01111110<<2
db %11111111>>6, %11111111<<2
db %01111110>>6, %01111110<<2
db %00111100>>6, %00111100<<2
db %00011000>>6, %00011000<<2
db %10010100>>6, %10010100<<2
db %01100010>>6, %01100010<<2
db %00100001>>6, %00100001<<2
; zniggy_7
db %00011000>>7, %00011000<<1
db %00111100>>7, %00111100<<1
db %01011110>>7, %01011110<<1
db %11111111>>7, %11111111<<1
db %00001110>>7, %00001110<<1
db %00111100>>7, %00111100<<1
db %00011000>>7, %00011000<<1
db %00111100>>7, %00111100<<1

db %01111110>>7, %01111110<<1
db %11111111>>7, %11111111<<1
db %01111110>>7, %01111110<<1
db %00111100>>7, %00111100<<1
db %00011000>>7, %00011000<<1
db %00010100>>7, %00010100<<1
db %00001010>>7, %00001010<<1
db %01111010>>7, %01111010<<1


DATA_BUG:
db %00001100, %00110000
db %00010011, %11001000
db %00000011, %11000000
db %00001111, %11110000
db %00000101, %10100000
db %10011110, %01111001
db %01111000, %00011110
db %00010110, %01101000

db %00010010, %01001000
db %00010010, %01001000
db %11110010, %01001111
db %00110000, %00001100
db %00111111, %11111100
db %01001011, %11010010
db %00000111, %11100000
db %00000001, %10000000 
 
DATA_BOTTLE:
db 68
db SPRITE_SIZE_16X16, 2, 16
db 48,0,48,0,48,0,48,0,120,0,120,0,252,0,252,0
db 4,0,244,0,244,0,4,0,252,0,252,0,252,0,252,0
db 3,0,3,0,3,0,6,0,30,0,30,0,63,0,63,0
db 1,0,61,0,61,0,1,0,127,0,127,0,126,0,62,0
db 0,0,0,0,0,2,0,7,0,14,0,252,1,56,3,216
db 4,88,15,184,31,240,3,224,57,192,124,128,126,0,63,0
db 0,0,0,28,0,28,0,24,0,248,1,248,3,240,0,112
db 3,144,3,208,0,208,7,16,7,240,7,240,0,16,7,224
db 0,12,0,12,0,12,0,12,0,30,0,30,0,63,0,63
db 0,32,0,47,0,47,0,32,0,63,0,63,0,63,0,63
db 0,96,0,96,0,96,0,48,0,60,0,60,0,126,0,126
db 0,64,0,94,0,94,0,64,0,127,0,127,0,63,0,62
db 0,0,0,0,32,0,112,0,56,0,31,128,14,64,13,224
db 13,16,14,248,7,252,3,224,1,206,0,159,0,63,0,126
db 0,96,0,96,0,96,0,48,0,60,0,60,0,126,0,126
db 0,64,0,94,0,94,0,64,0,127,0,127,0,63,0,62
 
DATA_LOVEMAN:
db 67
db SPRITE_SIZE_16X16, 2, 16
db 24,0,43,0,61,0,31,0,51,0,198,0,4,0,12,0
db 28,0,60,0,28,0,12,0,28,0,28,0,22,0,18,0
db 24,0,43,0,61,0,31,0,51,0,66,0,2,0,6,0
db 28,0,60,0,28,0,76,0,60,0,28,0,22,0,18,0
db 6,0,10,192,15,64,15,192,12,192,8,128,1,128,3,0
db 7,0,15,0,7,0,35,0,31,0,7,0,5,128,4,128
db 3,0,5,96,7,160,7,224,6,64,2,64,0,64,0,192
db 1,192,3,192,1,192,16,192,15,192,1,192,1,96,1,32
db 0,0,0,192,1,88,1,232,1,248,1,144,0,208,0,48
db 0,112,0,240,0,112,8,48,7,240,0,112,0,88,0,72
db 0,96,0,172,0,244,0,252,0,204,0,136,0,24,0,48
db 0,112,0,240,0,112,2,48,1,240,0,112,0,88,0,72
db 0,48,0,86,0,122,0,62,0,102,0,132,0,4,0,12
db 0,56,0,120,0,56,0,152,0,120,0,56,0,44,0,36
db 0,24,0,43,0,61,0,31,0,51,0,198,0,4,0,12
db 0,28,0,60,0,28,0,12,0,28,0,28,0,22,0,18
 
DATA_SNAKE:
db 68
db SPRITE_SIZE_16X16, 2, 16
db 7,192,15,32,31,56,31,248,16,0,16,0,15,240,0,8
db 0,8,15,240,16,0,16,0,15,240,0,8,0,8,15,240
 
DATA_GHOST:
db 69
db SPRITE_SIZE_16X16, 2, 16
db 0,0,96,6,56,12,28,216,15,240,15,224,11,160,25,48
db 31,240,62,248,61,120,63,248,63,248,63,120,51,104,0,0
 
DATA_BAT:
db BLACK_PAPER | RED_INK
db SPRITE_SIZE_8X8, 1, 8
db 36,153,255,165,189,219,129,66
 
DATA_CAVEBUG:
db 4
db SPRITE_SIZE_24X8, 3, 8
db 8,60,0,23,194,0,63,189,0,127,149,0,119,129,0,251
db 213,0,213,106,0,170,188,0,4,30,0,11,255,0,31,192
db 128,63,213,128,59,202,128,125,224,128,117,127,0,106,190,0
db 2,15,0,5,240,128,15,239,64,31,229,64,29,224,64,62
db 245,64,53,90,128,42,175,0,1,7,128,2,255,192,7,240
db 32,15,245,96,14,242,160,31,120,32,29,95,192,26,175,128
db 0,131,192,1,124,32,3,251,208,7,249,80,7,120,16,15
db 189,80,13,86,160,10,171,192,0,65,224,0,191,240,1,252
db 8,3,253,88,3,188,168,7,222,8,7,87,240,6,171,224
db 0,32,240,0,95,8,0,254,244,1,254,84,1,222,4,3
db 239,84,3,85,168,2,170,240,0,8,60,0,23,254,0,63
db 129,0,127,171,0,119,149,0,251,193,0,234,254,0,213,124

DATA_FAWKES:
db WHITE_INK | BRIGHT
db SPRITE_SIZE_8X8, 1, 8
db 126,255,153,255,165,90,36,24

DATA_STOPSIGN:
db RED_INK | BRIGHT
db SPRITE_SIZE_8X8, 1, 8
db 60,126,255,129,129,255,126,60

DATA_SNOWMAN:
db 71
db SPRITE_SIZE_16X16, 2, 16
db 1,192,2,160,3,224,130,33,65,199,64,1,177,194,15,252
db 3,96,3,224,7,112,15,248,15,120,15,248,15,120,7,240

DATA_BADCRYSTAL:
db 66
db SPRITE_SIZE_16X16, 2, 16
db 60,0,126,0,195,0,219,0,195,0,126,0,60,0,16,0
db 112,0,192,0,128,0,190,0,235,0,186,0,128,0,128,0
db 0,0,15,0,31,128,48,192,54,192,48,192,31,128,15,0
db 4,0,60,0,96,0,124,0,119,0,93,128,1,0,1,0
db 0,0,15,0,31,128,48,192,57,192,48,192,31,128,15,0
db 4,0,28,0,48,0,47,128,58,192,46,128,32,0,32,0
db 15,0,31,128,48,192,57,192,48,192,31,128,15,0,4,0
db 14,0,24,0,16,0,31,0,21,192,23,96,0,64,0,64
db 3,192,7,224,12,48,13,176,12,48,7,224,3,192,1,0
db 7,0,12,0,8,0,11,224,14,176,11,160,8,0,8,0
db 0,0,0,240,1,248,3,12,3,108,3,12,1,248,0,240
db 0,64,3,192,6,0,7,192,7,112,5,216,0,16,0,16
db 0,0,0,240,1,248,3,12,3,156,3,12,1,248,0,240
db 0,64,1,192,3,0,2,248,3,172,2,232,2,0,2,0
db 0,240,1,248,3,12,3,156,3,12,1,248,0,240,0,64
db 0,224,1,128,1,0,1,240,1,92,1,118,0,4,0,4

DATA_PIGEON:
db 7
db SPRITE_SIZE_16X16, 2, 16
db 0,0,0,0,112,0,120,0,220,0,252,3,60,15,31,255
db 29,254,30,60,15,248,15,240,0,32,0,0,0,0,0,0

DATA_WATER:
db 69
db SPRITE_SIZE_8X8, 1, 8
db 24,24,52,52,122,90,102,60

DATA_SLUDGE:
db 4
db SPRITE_SIZE_8X8, 1, 8
db 24,24,52,52,122,90,102,60

DATA_BBALL:
db 70
db SPRITE_SIZE_8X8, 1, 8
db 0,60,126,255,255,126,60,0

DATA_BERRY
db PURPLE_INK | BRIGHT
db SPRITE_SIZE_16X16, 2, 16
db 0,0,0,192,9,0,5,48,3,192,12,48,17,8,32,20
db 40,4,32,132,32,20,20,8,8,144,4,96,2,128,1,0


DATA_GEM:
db %00111100
db %01011010
db %11111111
db %01011010
db %00111100
db %00111100
db %00011000
db %00011000

DATA_BLOCK_SPRITES:
BLOCK_0:
db 0,0,0,0,0,0,0,0
db 127,127,127,0,247,247,247,0
db 255,85,170,0,85,0,170,0
db 255,129,255,129,255,129,255,129
db 255,131,133,139,149,169,209,255
db 3,3,3,3,3,3,3,3
db 128,254,170,84,170,84,40,16
db 1,1,3,3,7,7,15,15
db 128,128,192,192,224,224,240,240
db 31,31,63,63,127,127,255,255
db 248,248,252,252,254,254,255,255
db 1,1,3,3,7,7,15,15
db 0,0,0,0,0,0,0,0
db 128,128,192,192,224,224,240,240
db 0,0,0,0,0,0,0,0
db 31,31,63,63,127,127,255,255
db 0,0,0,0,0,0,0,0
db 248,248,252,252,254,254,255,255
db 24,24,52,52,122,122,253,253
db 17,19,7,19,17,17,17,255
db 29,13,5,1,65,97,113,255
db 131,17,17,17,17,17,131,255
db 1,1,199,199,199,1,1,255
db 1,31,3,31,31,31,31,255
db 1,31,3,31,31,31,1,255
db 231,231,231,231,0,129,195,231
db 7,7,57,33,39,57,1,127
db 127,127,127,0,247,247,247,0
db 24,24,52,52,122,122,253,253
db 255,136,136,255,255,17,17,255
db 0,224,32,108,106,202,202,234
db 0,128,0,155,173,191,137,187
db 0,0,4,84,84,116,16,100
db 126,66,255,66,126,90,90,102
db 102,102,126,90,90,90,90,90
db 0,0,3,4,4,12,8,24
db 0,0,254,34,33,33,33,33
db 31,63,97,222,99,73,34,28
db 126,126,126,126,254,127,0,0
db 254,255,131,185,69,146,68,56
db 255,136,136,255,255,17,17,255
db 16,231,102,24,40,100,100,72
db 60,126,255,255,253,253,122,60
db 244,248,244,248,244,248,244,248
db 255,251,191,255,254,255,239,255
db 173,214,182,89,255,255,255,255
db 127,127,127,0,247,247,247,0
db 0,1,3,3,3,3,3,6
db 127,255,191,247,108,220,216,221
db 240,232,160,88,124,248,244,230
db 6,7,7,7,7,15,11,14
db 213,245,113,153,255,253,253,252
db 255,255,236,222,248,254,252,62
db 1,3,7,15,31,63,127,255
db 0,0,0,0,0,0,0,0
db 128,192,224,240,248,252,254,255
db 247,243,248,255,255,255,255,255
db 255,227,121,253,252,255,255,255
db 44,76,218,186,43,73,153,21
db 63,255,255,239,248,255,255,248
db 15,127,255,127,207,255,254,240
db 248,255,255,255,7,192,0,0
db 0,248,255,200,216,224,48,0
db 0,0,0,0,0,0,0,0
db 255,127,63,31,15,7,3,1
db 255,254,252,248,240,224,192,128
db 255,255,223,207,255,255,112,0
db 128,224,240,248,255,255,126,0
db 255,255,255,255,255,255,255,0
db 255,254,180,164,32,0,0,0
db 255,255,223,207,255,255,112,0
db 128,136,138,170,170,170,187,255
db 192,48,204,243,255,252,240,192
db 3,12,51,207,255,63,15,3
db 0,129,195,231,0,129,195,231
db 255,129,189,165,165,189,129,255
db 255,129,189,165,165,189,129,255
db 8,16,255,16,8,255,8,16
db 255,0,255,85,85,81,17,17
db 173,214,182,89,255,255,255,255
db 0,85,170,255,85,255,170,255
db 255,85,170,0,85,0,170,0
db 24,24,52,52,122,122,253,253
db 0,60,90,102,102,90,60,0
db 255,129,255,129,255,129,255,129
db 211,82,222,128,243,18,243,94
db 211,82,223,129,243,18,243,94
db 166,164,188,0,230,36,230,188
db 8,16,126,16,8,126,8,16
db 82,98,82,98,82,98,82,98
db 127,63,119,251,219,73,62,127
db 1,3,7,14,30,63,117,247
db 255,255,240,248,5,142,212,96
db 56,68,162,209,161,209,169,181
db 30,33,36,72,88,148,168,180
db 168,180,152,148,90,77,42,45
db 128,64,70,43,53,41,178,84
db 129,255,129,255,129,255,129,255
db 0,85,170,255,85,255,170,255
db 138,239,33,33,239,10,235,186
db 93,215,80,247,132,132,247,81
db 3,3,3,3,3,3,3,3
db 60,126,255,255,253,253,122,60
db 60,102,165,165,165,165,102,60
db 127,63,119,251,219,73,62,255
db 254,180,164,32,0,0,0,0
db 255,231,102,52,60,126,255,255
db 31,127,255,255,255,255,255,255
db 207,207,231,231,207,207,231,231
db 248,254,255,255,255,255,255,255
db 255,255,255,51,0,204,255,255
db 255,255,255,255,255,255,254,248
db 255,255,255,127,127,63,15,3
db 248,254,206,255,255,0,254,252
db 31,127,115,255,255,0,127,63
db 1,15,255,127,63,31,7,1
db 244,248,244,248,244,248,244,248
db 0,254,254,86,174,214,238,246
db 255,251,191,255,254,255,239,255
db 126,8,16,8,16,126,16,8
db 246,238,214,174,86,254,254,0
db 60,126,255,255,253,253,122,60
db 63,31,59,125,109,36,31,63
db 191,159,187,253,237,164,31,191
db 255,191,247,251,219,201,62,255
db 0,0,0,0,0,0,0,60
db 126,255,255,253,253,122,60,0
db 255,254,180,164,32,0,0,0
db 127,63,119,251,251,121,62,127
db 127,127,125,99,69,73,81,97
db 69,65,65,67,69,73,81,97
db 127,127,125,99,69,73,81,97
db 65,67,69,73,83,103,127,127
db 255,145,131,133,137,145,161,193
db 69,65,65,67,69,73,83,103
db 255,145,131,133,137,145,161,193
db 16,126,16,8,16,8,126,8
db 127,127,65,67,69,73,81,97
db 65,67,69,73,83,103,127,127
db 8,126,8,16,8,16,126,16
db 60,126,251,251,239,127,61,16
db 126,220,204,188,238,251,158,178
db 112,192,128,184,238,187,146,146
db 69,65,65,67,69,73,81,97
db 0,0,0,0,0,0,0,0
db 0,0,60,255,255,255,60,0
db 0,0,60,255,255,255,60,0
db 145,74,56,110,189,24,126,129
db 52,24,52,24,44,52,24,44
db 145,74,56,110,189,24,126,129
db 255,255,255,255,127,63,15,3
db 255,255,255,255,254,252,240,192
db 170,85,170,85,170,85,170,85
db 0,2,6,62,126,90,126,60
db 170,85,170,85,170,85,170,85
db 145,74,56,110,189,24,126,129
db 0,0,0,0,0,0,0,0
db 0,0,60,255,255,60,0,0
db 0,0,0,0,0,0,0,0
db 74,70,98,82,74,70,98,82
db 60,126,255,255,253,253,122,60
db 0,0,0,8,28,62,127,255
db 128,192,136,4,4,134,193,128
db 128,192,136,4,4,134,193,128
db 0,255,255,0,0,255,255,0
db 231,195,195,231,231,195,195,231
db 66,86,106,66,86,106,66,86
db 52,24,52,24,44,52,24,52
db 0,0,32,42,58,190,254,255
db 24,44,52,24,44,52,24,52
db 24,52,24,44,52,24,44,52
db 0,52,24,44,52,24,44,52
db 0,3,15,30,56,48,115,98
db 0,255,240,123,28,12,206,70
db 102,102,102,102,102,102,102,102
db 98,115,48,56,30,63,75,120
db 70,206,12,28,120,252,243,30
db 16,231,102,24,40,100,100,72
db 0,0,0,0,0,0,0,0
db 0,0,0,0,0,0,0,0
db 255,123,49,27,15,7,3,1
db 255,123,49,27,15,7,3,1
db 0,0,0,0,0,0,0,0
db 0,173,215,182,89,255,255,255
db 0,0,0,0,0,0,0,0
db 52,24,44,52,24,44,52,24
db 94,244,161,11,94,244,161,31
db 94,244,161,11,94,244,161,223
db 94,245,161,10,94,245,161,222
db 242,167,13,88,242,167,13,88
db 243,167,12,88,243,167,12,88
db 128,0,0,0,0,0,0,0
db 128,0,32,0,0,0,0,0
db 0,0,0,0,0,0,0,0
db 127,127,127,0,247,247,247,0
db 32,207,204,48,80,200,200,144
db 192,48,204,243,255,252,240,192
db 3,12,51,207,255,63,15,3
db 127,63,119,255,219,73,62,127
db 60,90,255,90,60,60,24,24
db 196,231,97,112,60,127,151,240
db 73,65,65,67,69,73,81,97
db 127,1,253,129,191,128,254,0
db 60,90,255,90,60,60,24,24
db 24,60,90,219,255,66,36,24
db 128,128,136,138,170,170,171,255
db 0,0,60,255,255,255,60,0
db 145,74,56,110,189,24,126,153
db 51,255,204,51,204,51,204,51
db 0,2,6,62,126,90,126,60
db 204,0,0,51,204,0,0,51
db 0,0,60,255,255,60,0,0
DATA_BLOCK_ATTRIBS:
db 0
db 66
db 74
db 66
db 68
db 69
db 71
db 70
db 70
db 70
db 70
db 70
db 118
db 70
db 0
db 70
db 118
db 70
db 67
db 71
db 71
db 71
db 71
db 71
db 71
db 111
db 71
db 66
db 67
db 69
db 67
db 67
db 67
db 66
db 66
db 68
db 68
db 68
db 68
db 68
db 69
db 68
db 68
db 47
db 4
db 4
db 7
db 7
db 7
db 7
db 7
db 7
db 7
db 71
db 127
db 71
db 7
db 7
db 68
db 7
db 7
db 7
db 7
db 63
db 71
db 71
db 7
db 7
db 7
db 7
db 7
db 71
db 67
db 67
db 69
db 69
db 69
db 71
db 69
db 4
db 76
db 86
db 67
db 74
db 71
db 68
db 68
db 68
db 71
db 69
db 7
db 7
db 7
db 69
db 69
db 69
db 69
db 66
db 12
db 68
db 68
db 65
db 68
db 4
db 7
db 7
db 66
db 70
db 102
db 70
db 102
db 70
db 70
db 70
db 70
db 70
db 47
db 3
db 4
db 71
db 3
db 68
db 7
db 7
db 7
db 68
db 68
db 7
db 7
db 3
db 3
db 3
db 67
db 1
db 67
db 1
db 71
db 3
db 67
db 71
db 66
db 66
db 66
db 3
db 109
db 111
db 111
db 68
db 70
db 68
db 70
db 70
db 77
db 65
db 77
db 68
db 109
db 111
db 118
db 67
db 71
db 66
db 87
db 87
db 67
db 47
db 65
db 70
db 68
db 70
db 70
db 70
db 67
db 67
db 67
db 67
db 67
db 68
db 73
db 73
db 65
db 65
db 9
db 4
db 0
db 70
db 71
db 71
db 71
db 71
db 71
db 71
db 71
db 127
db 2
db 68
db 67
db 67
db 7
db 69
db 67
db 3
db 77
db 69
db 69
db 71
db 111
db 68
db 71
db 65
db 65
db 111
DATA_BLOCK_PROPERTIES:
db 0
db 1
db 1
db 2
db 0
db 2
db 1
db 1
db 1
db 0
db 0
db 0
db 0
db 0
db 1
db 1
db 1
db 1
db 4
db 1
db 1
db 1
db 1
db 1
db 1
db 2
db 1
db 0
db 6
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 7
db 2
db 7
db 0
db 7
db 7
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 2
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 2
db 1
db 1
db 1
db 1
db 4
db 6
db 6
db 0
db 0
db 1
db 2
db 1
db 1
db 1
db 1
db 0
db 1
db 2
db 1
db 1
db 1
db 2
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 2
db 1
db 1
db 1
db 0
db 1
db 0
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 2
db 1
db 0
db 1
db 1
db 1
db 0
db 1
db 0
db 1
db 1
db 1
db 0
db 1
db 0
db 1
db 1
db 2
db 1
db 0
db 2
db 0
db 0
db 0
db 0
db 5
db 7
db 1
db 1
db 2
db 0
db 1
db 1
db 1
db 1
db 5
db 4
db 0
db 0
db 4
db 2
db 1
db 0
db 4
db 0
db 1
db 1
db 0
db 2
db 0
db 2
db 2
db 2
db 1
db 1
db 1
db 1
db 1
db 1
db 1
db 0
db 1
db 0
db 1
db 1
db 4
db 2
db 0
db 0
db 0
db 0
db 0
db 0
db 0
db 0
db 1
db 2
db 4
db 4
db 1
db 0
db 1
db 1
db 1
db 5
db 1
db 4
db 0
db 2
db 1
db 0
db 0
db 7












DATA_ROOMS:

ROOM_1:
db 35,1,29,0,3,1,29,0,3,1,9,0,4,2,1,3,5,2,10,0,3,1
db 1,4,2,0,2,4,2,0,2,4,2,0,2,4,1,3,1,0,2,4,2,0
db 2,4,2,0,2,4,2,0,2,4,3,1,1,4,2,0,2,4,2,0,2,4
db 2,0,2,4,1,3,1,0,2,4,2,0,2,4,2,0,2,4,2,0,2,4
db 3,1,9,0,1,5,1,6,2,0,1,3,12,0,1,5,1,6,1,0,3,1
db 9,0,1,5,3,0,1,3,12,0,1,5,2,0,3,1,9,0,1,5,3,0
db 1,3,12,0,1,5,2,0,3,1,5,2,1,3,3,2,1,5,1,0,4,2
db 11,0,1,5,2,0,3,1,1,4,2,0,2,4,1,3,1,0,2,4,1,5
db 1,0,2,4,2,0,2,4,2,0,2,4,2,0,2,4,1,0,1,5,2,0
db 3,1,1,4,2,0,2,4,1,3,1,0,2,4,1,5,1,0,2,4,2,0
db 2,4,2,0,2,4,2,0,2,4,1,0,1,5,2,0,3,1,2,0,1,5
db 1,6,1,0,1,3,3,0,1,5,10,0,1,5,1,6,4,0,1,5,2,0
db 3,1,2,0,1,5,2,0,1,3,3,0,1,5,10,0,1,5,5,0,1,5
db 2,0,2,1,3,0,1,5,2,0,1,3,3,0,1,5,10,0,1,5,5,0
db 1,5,2,0,2,1,3,0,1,5,2,0,1,3,3,0,1,5,10,0,1,5
db 5,0,1,5,2,0,2,1,3,0,1,5,2,0,1,3,3,0,1,5,10,0
db 1,5,5,0,1,5,2,0,32,1,$FF
;Monsters
db 4,0
db 104, 96, DATA_BBALL, DATA_BBALL>>8, 1
db 240, 88, DATA_BBALL, DATA_BBALL>>8, 1
db 48, 112, DATA_BBALL, DATA_BBALL>>8, 1
db 192, 120, DATA_BBALL, DATA_BBALL>>8, 1
; Room name
db CHAR_B, CHAR_A + LC, CHAR_C + LC, CHAR_K + LC, CHAR_A + LC
db CHAR_L + LC, CHAR_L + LC, CHAR_E + LC, CHAR_Y + LC, CHAR_SPACE
db CHAR_B, CHAR_A + LC, CHAR_L + LC, CHAR_L + LC, 0
; Gems
db 17,16,13,64,27,48,25,96,2,120,17,16

ROOM_2:
db 11,1,1,7,1,8,19,1,11,0,1,9,1,10,17,0,2,1,10,0,1,11
db 2,12,1,13,16,0,2,1,10,0,1,9,2,12,1,10,16,0,2,1,1,0
db 2,4,2,0,2,4,2,0,1,11,4,12,1,13,2,0,2,4,2,0,2,4
db 8,0,1,14,1,0,2,4,2,0,2,4,1,0,1,14,1,15,4,16,1,17
db 1,14,1,0,2,4,2,0,2,4,10,0,2,1,2,0,2,1,1,0,1,11
db 6,12,1,13,1,0,2,1,1,3,1,0,2,1,17,0,1,9,6,12,1,10
db 3,0,1,3,4,0,2,1,1,0,2,1,1,0,2,1,19,0,1,3,11,0
db 1,1,11,0,2,1,6,0,1,3,3,1,8,0,1,1,1,0,2,4,2,0
db 2,4,3,0,1,1,1,7,1,8,1,1,5,0,1,3,1,1,1,7,1,8
db 1,1,7,0,1,1,1,0,2,4,2,0,2,4,2,0,2,1,1,15,1,17
db 2,1,4,0,2,1,1,15,1,17,2,1,6,0,1,1,1,0,2,1,1,0
db 1,3,2,1,1,0,2,1,1,7,2,16,1,8,2,1,2,0,2,1,1,7
db 2,16,1,8,1,1,6,0,1,1,4,0,1,3,3,0,2,1,1,15,2,16
db 1,17,2,1,1,0,3,1,1,15,2,16,1,17,2,1,5,0,1,14,4,0
db 1,3,2,0,1,18,1,1,1,7,4,16,1,8,1,1,1,0,2,1,1,7
db 4,16,1,8,1,1,10,0,1,3,2,0,2,1,1,15,4,16,1,17,1,1
db 1,18,2,1,1,15,4,16,1,17,2,1,1,18,1,0,1,18,2,0,8,1
db 1,7,6,16,1,8,2,1,1,7,6,16,1,8,14,1,1,15,6,16,1,17
db 2,1,1,15,6,16,1,17,6,1,$FF

;Monsters
db 0,0
; Room name
db CHAR_T, CHAR_R + LC, CHAR_I + LC, CHAR_F + LC, CHAR_O + LC
db CHAR_R + LC, CHAR_C + LC, CHAR_E + LC, 0
; Gems
db 7,32,7,32,26,48,26,48,29,40,28,112

ROOM_3:
db 33,1,31,0,1,1,31,0,1,1,33,0,1,3,4,1,1,3,1,1,1,19
db 1,20,1,21,1,22,1,23,1,24,1,25,1,26,1,22,1,20,4,1,1,3
db 8,1,2,0,1,3,4,1,1,3,7,1,1,25,7,1,1,3,8,1,2,0
db 1,3,4,1,1,3,7,1,1,25,7,1,1,3,9,1,1,0,1,3,4,1
db 1,3,15,0,1,3,9,1,1,0,1,3,4,1,1,3,15,0,1,3,9,1
db 1,0,1,3,5,1,2,0,2,28,3,0,1,3,3,0,2,28,2,0,10,1
db 1,0,1,3,12,1,1,3,17,1,1,0,1,3,12,1,1,3,17,1,1,0
db 1,3,12,1,1,3,16,1,2,0,1,3,12,1,1,3,16,1,2,0,1,3
db 12,1,1,3,16,1,2,0,1,3,12,1,1,3,17,1,1,0,1,3,12,1
db 1,3,31,1,1,3,16,1,$FF

;Monsters
db 0,0
; Room name
db CHAR_G, CHAR_E + LC, CHAR_T + LC, CHAR_SPACE, CHAR_A + LC, CHAR_SPACE
db CHAR_L, CHAR_O + LC, CHAR_I + LC, CHAR_F + LC, CHAR_E + LC, 0
; Gems
db 11,56,11,56,11,56,19,56,19,56,19,56

ROOM_5:
db 3,29,3,0,2,29,4,0,1,29,6,0,3,29,10,0,3,29,3,0,2,29
db 3,0,3,29,2,0,2,29,1,0,3,29,3,0,2,29,1,0,1,29,3,0
db 3,29,3,0,2,29,2,0,5,29,1,0,11,29,1,0,3,29,1,0,42,29
db 1,30,1,31,1,32,9,29,1,30,1,31,1,32,10,29,1,30,1,31,1,32
db 4,29,1,30,1,31,1,32,3,29,1,30,1,31,1,32,3,29,1,30,1,31
db 1,32,2,29,1,30,1,31,1,32,12,29,1,30,1,31,1,32,9,29,1,30
db 1,31,1,32,39,29,90,0,1,33,11,0,1,33,19,0,1,34,5,0,1,29
db 5,0,1,34,11,0,22,29,24,0,2,29,14,0,1,33,15,0,2,29,7,0
db 1,33,6,0,1,34,6,0,1,33,4,0,1,33,3,0,2,29,7,0,1,34
db 3,0,6,29,4,0,1,34,4,0,1,34,3,0,10,29,3,0,6,29,3,0
db 10,29,$FF 

;Monsters
db 3,0
db 24, 80, DATA_FAWKES, DATA_FAWKES>>8, 1
db 128, 80, DATA_FAWKES, DATA_FAWKES>>8, 0
db 200, 120, DATA_FAWKES, DATA_FAWKES>>8, 1
; Room name
db CHAR_P, CHAR_R + LC, CHAR_I + LC, CHAR_N + LC, CHAR_C + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_Z, CHAR_N + LC, CHAR_E + LC, CHAR_D + LC, CHAR_W + LC, CHAR_A + LC, CHAR_R + LC
db CHAR_D + LC, CHAR_SPACE, CHAR_S, CHAR_T + LC, CHAR_R + LC, CHAR_E + LC, CHAR_E + LC, CHAR_T + LC, 0
; Gems
db 3,120,3,120,3,120,30,120,30,120,30,120

ROOM_6:
db 6,0,1,29,4,0,3,29,18,0,2,29,3,0,3,29,3,0,3,29,18,0
db 2,29,2,0,5,29,2,0,3,29,1,0,1,29,4,0,1,29,1,0,1,29
db 3,0,1,29,1,0,1,29,3,0,2,29,1,0,7,29,1,0,5,29,4,0
db 3,29,3,0,3,29,3,0,2,29,1,0,13,29,3,0,11,29,2,0,16,29
db 2,0,1,29,1,0,3,29,3,0,3,29,1,0,1,29,1,0,23,29,3,0
db 38,29,74,0,1,35,1,36,4,0,1,35,1,36,24,0,1,37,1,38,1,39
db 3,0,1,37,1,38,1,39,11,0,27,29,4,0,3,29,28,0,4,29,27,0
db 5,29,4,0,1,35,1,36,7,0,1,35,1,36,3,0,1,35,1,36,6,0
db 6,29,4,0,1,37,1,38,1,39,6,0,1,37,1,38,1,39,2,0,1,37
db 1,38,1,39,4,0,39,29,$FF 

;Monsters
db 5,0
db 32, 80, DATA_STOPSIGN, DATA_STOPSIGN>>8, 1
db 176, 80, DATA_STOPSIGN, DATA_STOPSIGN>>8, 0
db 224, 72, DATA_STOPSIGN, DATA_STOPSIGN>>8, 1
db 72, 120, DATA_STOPSIGN, DATA_STOPSIGN>>8, 0
db 136, 120, DATA_STOPSIGN, DATA_STOPSIGN>>8, 1

; Room name
db CHAR_M, CHAR_O + LC, CHAR_T + LC, CHAR_O + LC, CHAR_R + LC, CHAR_W + LC, CHAR_A + LC
db CHAR_Y + LC, CHAR_SPACE, CHAR_T, CHAR_R + LC, CHAR_A + LC, CHAR_F + LC, CHAR_F + LC
db CHAR_I + LC, CHAR_C + LC, 0
; Gems
db 4,80,16,128,30,72,4,80,16,128,30,72


ROOM_7:
db 9,0,9,40,13,0,1,40,9,0,4,41,4,0,1,41,13,0,1,40,9,0
db 4,41,4,0,1,41,13,0,1,40,9,0,1,41,2,0,1,41,4,0,1,41
db 8,0,1,42,3,0,2,40,9,0,1,41,2,0,1,41,4,0,1,41,7,0
db 3,42,3,0,1,40,9,0,1,41,2,0,2,40,2,0,2,40,6,0,5,42
db 1,41,1,0,2,40,8,0,1,41,3,0,1,41,3,0,1,40,6,0,2,42
db 1,43,2,42,1,41,1,0,3,40,7,0,1,41,7,0,1,40,1,0,3,42
db 4,0,1,43,2,0,1,41,1,0,1,40,17,0,1,40,1,0,3,42,4,0
db 1,43,2,0,1,41,1,0,1,40,8,0,3,42,6,0,1,40,1,0,1,42
db 1,43,1,42,4,0,1,43,2,0,1,41,1,0,1,40,9,0,1,43,4,0
db 3,42,1,40,2,0,1,43,5,0,1,43,2,0,1,41,1,0,4,40,3,44
db 3,0,1,43,5,0,1,43,4,0,1,43,5,0,1,43,2,0,1,41,1,0
db 3,40,3,0,2,44,2,28,1,43,4,28,1,0,1,43,4,0,1,43,5,0
db 1,43,2,0,1,41,1,0,2,40,5,0,9,44,1,41,1,44,1,40,10,44
db 1,0,1,41,1,0,1,40,1,45,14,0,1,41,1,0,1,40,13,44,1,40
db 1,45,14,0,1,41,1,0,15,40,9,45,2,44,4,0,1,41,1,0,25,45
db 5,44,1,41,16,45,$FF
;Monsters
db 0,0
; Room name
db CHAR_T, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE, CHAR_C, CHAR_I + LC
db CHAR_T + LC, CHAR_Y + LC, CHAR_SPACE, CHAR_P, CHAR_A + LC, CHAR_R + LC
db CHAR_K + LC, 0
; Gems
db 30,8,1,72,15,72,1,112,1,120,30,8


ROOM_8:
db 33,46,31,0,1,46,31,0,1,47,1,48,1,49,29,0,1,50,1,51,1,52
db 12,0,1,53,11,54,1,55,4,0,1,56,1,57,1,14,1,58,1,59,1,58
db 1,60,1,61,1,62,5,0,1,53,13,54,1,55,3,0,1,63,1,58,1,63
db 1,58,10,0,15,54,3,0,1,58,1,63,2,58,10,0,15,54,3,0,4,58
db 7,0,1,64,17,54,3,0,1,63,3,58,1,63,1,58,6,0,1,64,16,54
db 3,0,3,58,2,63,1,58,7,0,1,64,15,54,3,0,2,58,3,0,1,58
db 8,0,1,64,13,54,1,65,3,0,2,58,3,0,1,58,9,0,1,64,11,54
db 1,65,4,0,2,58,3,0,1,66,1,67,25,0,1,68,1,58,7,68,23,0
db 1,58,9,68,22,0,2,46,1,58,61,46,$FF
;Monsters
db 0,0
; Room name
db CHAR_W, CHAR_I + LC, CHAR_S + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_S, CHAR_T + LC, CHAR_A + LC, CHAR_T + LC, CHAR_U + LC, CHAR_E + LC, 0
; Gems
db 8,32,8,32,8,32,8,32,8,32,8,32
ROOM_8_TEXT:
db CHAR_N, CHAR_SPACE, CHAR_O, CHAR_SPACE, CHAR_W, 0
db CHAR_S, CHAR_SPACE, CHAR_H, CHAR_SPACE, CHAR_O, CHAR_SPACE, CHAR_V, CHAR_SPACE, CHAR_E, 0
db CHAR_O, CHAR_SPACE, CHAR_F, CHAR_SPACE, CHAR_F, 0
db CHAR_W, CHAR_SPACE, CHAR_A, CHAR_SPACE, CHAR_N, CHAR_SPACE, CHAR_K, CHAR_SPACE
db CHAR_E, CHAR_SPACE, CHAR_R, 0

ROOM_9:
db 32,46,130,0,1,41,2,46,29,0,1,41,4,0,4,46,18,0,1,46,4,0
db 1,41,5,0,1,41,4,0,2,46,2,41,10,46,13,0,1,41,6,0,2,41
db 9,0,1,41,13,0,1,41,6,0,2,41,9,0,1,41,20,0,2,41,30,0
db 2,41,29,0,1,46,1,41,2,46,24,0,2,46,3,0,1,41,1,0,1,41
db 2,0,2,46,16,0,1,48,1,49,2,0,1,41,6,0,1,41,6,0,2,46
db 12,0,1,51,1,69,8,0,1,61,1,62,14,0,2,46,1,70,1,67,11,71
db 1,60,12,71,36,46,$FF
;Monsters
db 0,0
; Room name
db CHAR_F, CHAR_A + LC, CHAR_L + LC, CHAR_L + LC, CHAR_E + LC, CHAR_N + LC
db CHAR_SPACE, CHAR_M, CHAR_O + LC, CHAR_N + LC, CHAR_U + LC, CHAR_M + LC
db CHAR_E + LC, CHAR_N + LC, CHAR_T + LC, CHAR_SPACE
db CHAR_P, CHAR_A + LC, CHAR_R + LC, CHAR_K + LC, 0
; Gems
db 2,64,2,64,2,64,29,40,29,40,29,40


ROOM_10:
db 32,46,26,0,4,41,1,0,1,46,26,0,4,41,1,0,1,46,26,0,3,41
db 2,0,1,46,26,0,1,41,1,0,1,41,7,0,4,46,1,41,4,46,2,41
db 5,46,1,41,5,0,1,41,1,0,1,41,2,0,1,46,8,0,1,41,4,0
db 2,41,5,0,1,41,5,0,1,41,1,0,1,41,2,0,1,46,8,0,1,41
db 2,71,2,0,2,41,5,0,1,41,5,0,1,41,1,0,1,41,2,0,1,46
db 8,0,1,41,2,46,2,0,2,41,5,0,1,41,5,0,1,41,1,0,1,41
db 2,0,1,46,8,0,1,41,2,46,2,0,1,41,6,0,1,41,7,0,1,41
db 2,0,1,41,3,0,2,46,1,41,5,46,2,0,1,41,6,0,3,46,1,41
db 3,46,1,0,1,41,2,0,1,46,5,0,1,41,3,0,2,46,2,0,1,41
db 9,0,1,41,4,0,1,41,8,0,1,41,3,0,2,46,12,0,1,41,4,0
db 1,41,2,0,1,71,5,0,1,41,3,0,2,46,12,0,1,41,4,0,1,41
db 2,0,1,46,5,0,1,41,3,0,2,46,4,0,3,71,10,0,1,41,2,0
db 1,46,5,0,1,41,3,0,2,46,3,0,1,71,3,46,1,71,9,0,1,41
db 3,0,7,46,2,71,2,46,3,0,5,46,1,71,8,0,1,41,3,0,11,46
db 3,0,6,46,8,0,1,41,3,0,$FF
;Monsters
db 0,0
; Room name
db CHAR_O, CHAR_V + LC, CHAR_E + LC, CHAR_R + LC, CHAR_G + LC, CHAR_R + LC
db CHAR_O + LC, CHAR_W + LC, CHAR_N + LC, CHAR_SPACE, CHAR_T, CHAR_E + LC
db CHAR_M + LC, CHAR_P + LC, CHAR_L + LC, CHAR_E + LC, 0
; Gems
db 30,8,30,8,22,32,22,32,3,72,3,72



ROOM_11:
db 15,1,1,3,17,1,1,196,14,0,1,73,1,1,3,4,1,0,3,4,1,0
db 3,4,1,0,1,197,2,1,1,196,14,0,1,73,1,1,1,4,1,0,1,4
db 2,0,1,4,2,0,1,4,2,0,1,4,1,197,2,1,1,196,14,0,1,73
db 1,1,1,4,2,0,1,4,1,0,1,4,2,0,1,4,2,0,1,4,1,197
db 2,1,1,196,3,0,13,1,3,4,1,0,3,4,1,0,1,4,2,0,1,4
db 1,197,2,1,1,196,28,0,1,197,1,1,1,196,29,0,1,197,1,1,1,196
db 3,0,23,1,1,3,2,0,1,197,1,1,1,196,26,0,1,3,2,0,1,197
db 3,1,25,0,1,3,2,0,1,197,2,1,1,196,2,0,1,3,22,1,1,3
db 2,0,1,197,2,1,1,196,2,0,1,3,25,0,1,197,2,1,1,196,2,0
db 1,3,25,0,1,197,2,1,1,196,2,0,1,3,23,0,1,28,1,0,1,197
db 2,1,1,196,1,0,10,1,5,0,12,1,1,197,2,1,1,196,28,0,1,197
db 2,1,1,196,13,18,1,0,14,18,1,197,16,1,1,3,16,1,$FF

;Monsters
db 0,0
; Room name
db CHAR_B, CHAR_I + LC, CHAR_N + LC, CHAR_SPACE, CHAR_T, CHAR_H + LC
db CHAR_A + LC, CHAR_T + LC, CHAR_SPACE, CHAR_K, CHAR_N + LC, CHAR_O + LC
db CHAR_I + LC, CHAR_F + LC, CHAR_E + LC, 0
; Gems
db 15,24,16,64,1,64,15,112,29,104,29,40


ROOM_13:
db 10,29,3,0,1,29,1,74,2,75,1,74,1,29,3,0,10,29,9,0,1,29
db 3,0,1,29,1,74,2,75,1,74,1,29,3,0,1,29,18,0,1,29,3,0
db 1,29,1,74,2,75,1,74,1,29,3,0,1,29,9,0,4,76,1,77,1,0
db 1,77,2,0,1,29,3,0,1,29,1,74,2,75,1,74,1,29,3,0,1,29
db 8,0,2,76,5,0,1,77,1,0,1,14,1,29,3,0,1,29,1,74,2,75
db 1,74,1,29,1,0,3,29,2,0,1,18,3,0,1,76,1,18,2,76,1,77
db 5,0,1,18,1,14,1,29,3,0,1,29,1,74,2,75,1,74,1,29,1,0
db 1,29,6,78,3,0,3,76,1,77,1,76,4,78,1,76,1,0,1,29,3,0
db 1,29,1,74,2,75,1,74,1,29,1,0,1,29,7,0,1,77,2,0,2,76
db 1,77,5,0,1,76,1,0,1,29,3,0,1,29,1,74,2,75,1,74,1,29
db 1,0,1,29,7,0,1,77,2,0,2,76,6,0,1,76,1,0,1,29,3,0
db 1,29,1,74,2,75,1,74,1,29,1,0,1,29,5,0,1,18,4,0,2,76
db 1,0,1,77,4,0,1,76,1,0,1,29,3,0,1,29,1,74,2,75,1,74
db 1,29,1,0,1,29,3,0,7,78,2,76,6,0,1,76,1,0,1,29,3,0
db 1,29,1,74,2,75,1,74,1,29,1,0,1,29,1,77,9,0,2,76,2,0
db 1,76,4,78,1,0,1,29,3,0,1,29,1,74,2,75,1,74,1,29,1,0
db 1,29,1,77,9,0,2,76,1,77,7,0,1,29,3,0,1,29,1,74,2,75
db 1,74,1,29,1,0,1,29,2,76,4,0,1,18,3,0,2,76,1,77,7,0
db 1,29,3,0,1,29,1,74,2,75,1,74,1,29,2,0,8,78,2,0,2,76
db 6,78,2,0,1,29,3,0,1,29,1,74,2,75,1,74,1,29,12,0,1,76
db 8,0,1,77,1,29,3,0,1,29,1,74,2,75,1,74,1,29,11,0,2,76
db 8,0,1,77,1,29,3,0,1,29,1,74,2,75,1,74,1,29,2,78,1,0
db 1,77,2,0,1,18,2,0,4,76,10,29,3,0,1,29,1,74,2,75,1,74
db 1,29,3,0,1,77,9,76,$FF
;Monsters
db 0,0
; Room name
db CHAR_H, CHAR_E + LC, CHAR_L + LC, CHAR_L + LC, CHAR_SQ, CHAR_S + LC, CHAR_SPACE
db CHAR_H, CHAR_E + LC, CHAR_L + LC, CHAR_L + LC, 0
; Gems
db 24,24,10,16,8,56,5,72,12,56,30,56


ROOM_14:
db 32,29,10,0,1,76,1,0,1,76,12,0,5,77,1,0,1,76,10,0,1,76
db 1,0,1,76,12,0,1,77,3,0,1,77,1,0,3,76,7,77,1,0,1,89
db 1,0,1,89,3,0,3,178,6,0,1,77,3,0,2,77,2,76,9,0,1,89
db 1,0,1,89,3,0,1,178,1,16,1,178,11,0,1,77,2,76,1,0,7,77
db 1,0,1,76,1,0,1,76,2,0,5,178,1,0,1,160,2,0,2,160,4,0
db 1,77,2,76,9,0,1,89,1,0,1,89,2,0,1,160,1,0,1,160,1,0
db 1,160,10,0,1,77,2,76,1,0,7,77,1,0,1,89,1,0,1,89,2,0
db 2,160,1,106,2,160,9,0,4,76,9,0,1,76,1,0,1,76,3,0,3,160
db 12,0,2,76,1,0,7,77,1,0,1,89,1,0,1,89,1,0,1,71,5,160
db 3,0,1,160,2,0,2,160,3,0,2,76,9,0,1,89,1,0,1,89,1,0
db 7,160,10,0,2,76,1,0,7,77,1,0,1,76,1,0,1,76,1,0,7,160
db 8,0,4,76,7,0,1,77,1,0,1,89,1,0,1,89,1,0,7,160,1,0
db 1,160,8,0,2,76,7,0,1,77,1,0,1,89,1,0,1,89,1,71,1,0
db 5,160,11,0,2,76,2,0,1,76,6,78,4,76,7,78,1,76,4,78,1,76
db 4,0,2,76,12,0,1,89,7,0,1,89,9,0,2,76,12,0,1,89,7,0
db 1,89,9,0,2,76,9,78,1,76,2,0,1,76,7,78,1,76,2,0,1,76
db 6,78,1,76,$FF
;Monsters
db 0,0
; Room name
db CHAR_G, CHAR_N + LC, CHAR_U + LC, CHAR_G + LC, CHAR_SQ, CHAR_S + LC, CHAR_SPACE
db CHAR_I, CHAR_C + LC, CHAR_E + LC, CHAR_SPACE, CHAR_P, CHAR_A + LC
db CHAR_L + LC, CHAR_A + LC, CHAR_C + LC, CHAR_E + LC, 0
; Gems
db 8,16,7,56,1,72,11,128,30,8,29,80


ROOM_15:
db 1,79,2,80,10,79,2,0,1,41,2,0,10,79,3,80,1,79,1,80,4,79
db 1,0,1,41,2,79,1,41,1,0,1,41,3,0,1,41,3,0,1,79,2,0
db 1,41,1,0,1,41,2,0,3,79,3,80,2,79,1,41,2,0,2,41,1,0
db 1,41,1,0,1,41,3,0,1,41,3,0,1,79,1,0,2,41,1,0,1,41
db 2,0,1,41,1,0,1,79,1,80,3,79,1,0,1,41,3,0,3,41,1,0
db 2,41,2,0,1,41,5,0,1,41,2,0,1,41,2,0,1,41,1,0,2,79
db 2,80,1,79,1,0,1,41,3,0,2,41,3,0,1,41,1,0,2,41,5,0
db 1,41,2,0,1,41,2,0,1,41,1,0,1,41,2,79,1,80,1,79,1,0
db 1,41,3,0,1,41,4,0,1,41,1,0,2,41,1,0,2,41,2,0,1,41
db 2,0,1,41,2,0,1,41,1,0,1,41,1,0,1,79,1,80,1,79,1,0
db 2,41,2,0,1,41,4,0,1,41,1,0,2,41,2,0,1,41,2,0,1,41
db 2,0,1,41,2,0,1,41,1,0,1,41,1,0,3,79,2,0,1,41,2,0
db 1,41,4,0,1,41,1,0,2,41,2,0,1,41,2,0,1,41,2,0,2,41
db 1,0,1,41,1,0,1,41,1,0,1,79,1,80,1,79,2,0,1,41,1,0
db 2,41,4,0,1,41,2,0,1,41,2,0,1,41,2,0,1,41,3,0,1,41
db 3,0,1,41,1,0,1,79,1,80,1,79,2,0,1,41,1,0,3,41,2,0
db 1,41,3,0,1,41,2,0,2,41,1,0,1,41,3,0,1,41,5,0,1,79
db 1,80,1,79,4,0,1,41,1,0,1,41,2,0,1,41,3,0,1,41,3,0
db 1,41,1,0,1,41,3,0,1,41,1,0,7,79,3,0,2,41,1,0,1,41
db 2,0,1,41,3,0,1,41,3,0,1,41,1,0,1,41,2,0,2,41,3,0
db 2,79,2,80,1,79,3,0,1,41,2,0,1,41,2,0,1,41,2,0,2,41
db 3,0,1,41,4,0,1,41,5,0,1,79,2,80,1,79,2,0,2,41,2,0
db 1,41,2,0,1,41,2,0,1,41,4,0,1,41,10,0,1,79,1,80,2,79
db 2,0,2,41,2,0,1,41,2,0,1,41,2,0,1,41,4,0,1,41,9,0
db 2,79,2,80,1,79,3,0,1,41,5,0,1,41,2,0,2,41,3,0,1,41
db 9,0,1,79,3,80,2,79,2,0,1,41,5,0,1,41,3,0,1,41,3,0
db 1,41,6,0,4,79,2,80,1,79,1,80,11,79,2,0,1,41,2,0,9,79
db 4,80,1,79,$FF
;Monsters
db 0,0
; Room name
db CHAR_B, CHAR_U + LC, CHAR_N + LC, CHAR_G + LC, CHAR_L + LC, CHAR_E + LC
db CHAR_SPACE, CHAR_I + LC, CHAR_N + LC, CHAR_SPACE, CHAR_T + LC, CHAR_H + LC
db CHAR_E + LC, CHAR_SPACE, CHAR_J, CHAR_U + LC, CHAR_N + LC
db CHAR_G + LC, CHAR_L + LC, CHAR_E + LC, 0
; Gems
db 8,48,28,64,2,80,18,88,29,96,29,96

ROOM_17:
db 108,0,1,81,24,0,1,81,2,82,1,0,1,81,1,0,1,81,1,83,3,0
db 1,82,21,0,2,83,1,0,1,83,1,81,2,83,5,81,4,0,2,81,2,0
db 1,81,1,0,1,81,1,0,2,81,4,0,1,84,9,0,3,83,1,85,1,81
db 2,0,1,81,2,83,2,0,1,83,1,82,1,83,1,82,1,83,5,0,1,84
db 11,0,3,83,2,81,3,83,2,0,1,83,1,81,1,85,1,81,1,83,5,0
db 3,81,1,0,1,82,1,0,1,84,1,0,1,84,4,0,1,85,2,83,1,85
db 1,83,1,84,3,0,1,85,1,83,3,85,1,0,4,81,3,83,3,81,1,84
db 1,0,1,84,5,0,1,85,2,83,1,85,2,84,3,0,1,83,1,0,1,83
db 2,0,1,83,1,85,3,83,1,85,1,83,1,85,2,0,1,84,4,81,4,0
db 1,86,1,87,3,84,8,0,3,85,1,0,3,85,3,0,1,84,10,0,2,84
db 9,0,1,85,9,0,1,84,10,0,1,84,10,0,1,85,9,0,1,84,10,0
db 1,84,10,0,1,85,1,0,1,84,4,81,2,0,4,81,19,0,1,85,1,0
db 1,84,22,0,1,82,6,0,1,85,1,0,1,84,13,0,1,82,4,81,3,0
db 8,81,1,85,16,81,1,83,1,85,1,83,1,85,2,0,1,81,1,83,1,85
db 2,83,1,85,1,83,1,85,1,83,$FF 
;Monsters
db 3,0
db 56, 119, DATA_GHOST, DATA_GHOST>>8, 1
db 152, 111, DATA_GHOST, DATA_GHOST>>8, 1
db 216, 111, DATA_GHOST, DATA_GHOST>>8, 1
; Room name
db CHAR_G, CHAR_H + LC, CHAR_O + LC, CHAR_S + LC, CHAR_T + LC, CHAR_SPACE, CHAR_S
db CHAR_P + LC, CHAR_O + LC, CHAR_T + LC, 0
; Gems
db 5,24,14,24,27,24,29,24,23,64,12,104


ROOM_18:
db 14,0,6,46,8,0,1,41,17,0,6,46,8,0,1,41,17,0,2,46,2,0
db 2,46,8,0,1,41,1,0,1,71,8,0,7,81,2,46,2,0,2,46,6,0
db 1,46,1,41,3,46,5,0,3,81,1,83,2,85,1,83,1,85,2,83,3,46
db 1,41,2,46,7,0,1,41,4,0,4,81,1,83,4,85,2,83,2,85,1,83
db 3,46,1,41,2,46,7,0,1,41,4,0,1,83,2,85,4,0,3,85,2,0
db 2,85,3,46,1,41,2,46,7,0,1,41,4,0,1,85,13,0,3,46,1,41
db 2,46,7,0,1,41,4,0,1,46,1,71,25,0,1,41,4,0,5,46,1,41
db 17,0,1,71,3,0,1,41,9,0,1,41,6,0,1,41,16,46,8,0,1,41
db 6,0,1,41,24,0,1,41,6,0,1,41,31,0,1,41,31,0,1,41,31,0
db 1,41,4,0,1,18,9,0,1,18,4,0,32,81,1,83,1,85,2,83,2,85
db 2,83,1,85,1,83,1,85,2,83,2,85,2,83,1,85,1,83,1,85,1,83
db 1,85,2,83,2,85,2,83,1,85,1,83,1,85,1,83,$FF
;Monsters
db 0,0
; Room name
db CHAR_O, CHAR_L + LC, CHAR_D + LC, CHAR_SPACE
db CHAR_T, CHAR_O + LC, CHAR_M + LC, CHAR_B + LC, 0
; Gems
db 9,16,13,16,16,24,3,64,21,104,23,104


ROOM_21:
db 3,69,1,0,2,69,10,0,2,76,4,0,1,88,9,76,22,0,1,88,3,0
db 1,89,2,0,3,76,20,0,2,14,1,88,3,0,1,89,11,0,1,90,1,69
db 3,0,2,90,3,0,1,78,1,89,1,78,3,0,1,88,4,78,7,0,1,91
db 4,90,3,0,3,69,4,0,1,89,4,0,1,88,7,0,2,76,1,0,1,91
db 1,92,4,69,10,0,1,89,4,0,1,88,6,0,3,76,2,69,6,0,1,69
db 7,0,16,76,11,0,1,69,4,0,4,90,2,92,3,69,7,90,16,0,2,69
db 1,90,6,0,3,90,1,92,3,69,1,0,1,69,6,0,1,69,9,0,1,90
db 6,0,1,90,1,92,1,69,9,0,1,69,4,0,1,69,7,0,2,69,2,90
db 2,0,1,88,1,69,26,0,2,90,1,92,1,69,1,88,16,0,1,69,10,0
db 2,90,2,0,1,88,9,0,1,91,1,90,12,0,1,88,3,0,1,90,1,92
db 2,0,1,88,1,0,2,90,2,69,3,0,1,91,1,90,1,69,12,0,1,88
db 2,69,1,0,1,90,2,0,1,69,1,88,2,69,1,90,4,0,3,69,3,0
db 1,69,9,0,1,88,3,0,1,90,3,0,1,88,2,0,1,90,3,0,1,90
db 16,0,1,88,3,0,1,90,1,0,1,90,1,0,1,88,2,0,5,90,16,0
db 1,88,3,0,2,90,1,69,1,0,1,88,2,0,5,90,$FF

;Monsters
db 4,1
db 72, 40, DATA_BAT, DATA_BAT>>8, 1
db 48, 80, DATA_BAT, DATA_BAT>>8, 1
db 176, 72, DATA_BAT, DATA_BAT>>8, 1
db 176, 112, DATA_BAT, DATA_BAT>>8, 1
db 150, 39, DATA_CAVEBUG, DATA_CAVEBUG>>8, 1

; Room name
db CHAR_I, CHAR_C + LC, CHAR_E + LC, CHAR_SPACE, CHAR_P, CHAR_A + LC, CHAR_L + LC
db CHAR_A + LC, CHAR_C + LC, CHAR_E + LC, CHAR_SPACE, CHAR_E, CHAR_N + LC, CHAR_T + LC
db CHAR_R + LC, CHAR_A + LC, CHAR_N + LC, CHAR_C + LC, CHAR_E + LC, 0
; Gems
db 1,32,6,104,18,88,19,64,21,128,28,112


ROOM_22:
db 10,78,1,76,2,0,1,76,7,78,1,76,2,0,1,76,7,78,17,0,1,93
db 30,0,1,94,1,95,1,96,24,0,4,76,1,0,1,95,2,93,1,0,4,76
db 8,0,2,78,1,76,11,0,1,76,5,78,1,76,11,0,2,90,1,89,2,78
db 1,76,23,0,1,76,2,78,2,90,1,89,2,90,1,89,23,0,1,89,2,69
db 2,90,1,76,2,90,1,89,23,0,1,89,2,0,3,69,1,92,1,90,1,76
db 8,78,1,76,5,0,1,76,8,78,1,76,6,0,10,90,1,76,5,78,1,76
db 1,92,9,69,5,0,1,69,4,90,1,92,9,90,1,92,1,69,16,0,1,69
db 1,90,1,92,1,69,1,0,8,90,1,92,19,0,1,69,3,0,8,69,44,0
db 1,91,1,90,29,0,1,91,7,90,16,0,1,69,6,0,1,91,8,90,22,0
db 1,91,11,90,1,92,1,69,3,0,2,69,3,0,2,69,7,0,1,91,5,90,$FF
;Monsters
db 2,0
db 56, 10, DATA_SNOWMAN, DATA_SNOWMAN>>8, 0
db 208, 10, DATA_SNOWMAN, DATA_SNOWMAN>>8, 0
; Room name
db CHAR_W, CHAR_A + LC, CHAR_L + LC, CHAR_K + LC, CHAR_I + LC, CHAR_N + LC, CHAR_G + LC
db CHAR_SPACE, CHAR_I + LC, CHAR_N + LC, CHAR_SPACE, CHAR_T, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_A, CHAR_I + LC, CHAR_R + LC, 0
; Gems
db 14,16,20,16,15,48,19,48,24,96,30,56


ROOM_24:
db 1,201,1,136,2,0,2,132,1,201,2,132,1,201,13,0,1,136,8,0,1,201
db 1,136,4,0,1,201,1,0,1,136,1,201,13,0,1,136,8,0,1,201,1,129
db 4,0,1,201,1,0,1,136,1,201,13,0,1,136,8,0,2,201,1,129,3,0
db 1,201,2,136,1,201,9,0,2,2,2,0,1,136,2,0,2,2,1,0,1,98
db 2,0,3,201,3,0,1,132,1,136,1,0,1,201,10,0,3,98,1,136,3,98
db 2,0,3,81,1,132,1,201,1,132,1,129,5,0,1,201,1,0,1,136,11,0
db 1,136,6,0,2,2,1,129,1,201,1,129,1,201,5,0,1,201,1,0,1,136
db 3,0,1,18,7,0,1,136,7,0,1,98,4,201,5,129,1,201,1,0,1,136
db 1,0,5,2,5,0,1,136,8,0,1,201,3,132,3,201,3,132,1,0,1,136
db 1,129,1,98,3,0,1,98,5,0,1,136,8,0,1,201,3,0,3,132,4,0
db 1,136,1,201,1,81,3,0,1,81,5,0,1,136,8,0,1,132,10,0,1,136
db 1,201,1,2,9,0,1,136,8,0,1,129,10,0,1,136,1,201,1,98,9,0
db 1,136,4,0,2,18,2,0,1,201,1,129,6,0,4,129,1,132,6,81,1,136
db 12,81,1,201,1,132,1,129,5,0,4,201,1,0,6,2,1,136,12,2,1,201
db 1,129,1,201,1,18,1,129,1,0,1,129,1,0,1,132,3,201,1,0,6,98
db 1,136,10,0,2,98,1,201,1,132,1,201,1,129,1,132,1,0,1,132,2,0
db 2,201,1,132,1,136,6,81,1,136,10,0,2,81,1,201,1,129,2,201,1,129
db 1,18,3,0,2,201,1,0,1,136,1,0,5,2,1,136,2,0,1,18,2,0
db 1,18,4,0,2,2,3,201,1,132,1,201,1,129,3,0,2,201,1,0,1,136
db 1,0,18,98,$FF
;Monsters
db 0,0
; Room name
db CHAR_D, CHAR_E + LC, CHAR_C + LC, CHAR_K + LC, CHAR_SPACE, CHAR_A
db CHAR_N + LC, CHAR_D + LC, CHAR_SPACE, CHAR_D, CHAR_I + LC, CHAR_G + LC
db CHAR_G + LC, CHAR_E + LC, CHAR_R + LC, 0
; Gems
db 7,8,1,80,14,64,12,104,29,112,29,128


ROOM_25:
db 22,0,1,3,31,0,1,3,31,0,1,3,20,0,1,3,10,0,1,3,6,81
db 3,0,3,81,1,18,2,81,1,3,4,0,1,3,10,0,1,3,6,2,1,3
db 2,0,6,2,1,3,2,0,4,81,1,97,8,0,1,3,6,98,1,3,2,0
db 6,98,1,3,2,0,4,2,1,97,2,0,2,81,1,18,1,81,2,0,4,83
db 1,85,2,83,1,3,8,0,1,3,2,0,4,98,1,97,2,0,3,2,1,83
db 4,0,1,99,1,100,1,83,2,100,1,3,8,0,1,3,4,0,2,83,1,97
db 2,0,2,100,9,0,2,83,1,3,8,0,1,3,4,0,4,83,1,3,11,0
db 3,100,5,0,1,81,2,0,1,3,4,0,4,83,1,3,7,0,9,81,2,0
db 4,2,1,3,4,0,4,85,1,3,1,0,1,101,14,2,16,81,1,3,15,81
db 16,2,1,3,15,2,16,98,1,3,15,98,13,81,3,0,1,3,15,81,13,2
db 3,0,1,3,15,2,16,98,1,3,15,98,$FF

;Monsters
db 2,0
db 56, 78, DATA_GHOST, DATA_GHOST>>8, 1
db 160, 70, DATA_GHOST, DATA_GHOST>>8, 1
; Room name
db CHAR_R, CHAR_A + LC, CHAR_I + LC, CHAR_N + LC, CHAR_B + LC
db CHAR_O + LC, CHAR_W + LC, CHAR_S + LC, 0

; Gems
db 3,16,11,16,18,32,26,64,10,80,13,120


ROOM_26:
db 45,0,11,102,1,0,2,102,17,0,16,102,16,0,17,102,15,0,17,102,16,0
db 15,102,19,0,12,102,22,0,8,102,26,0,1,43,1,102,1,43,2,102,27,0
db 3,43,10,0,2,81,6,0,1,102,1,0,1,102,1,0,3,102,4,0,3,43
db 10,0,6,2,6,0,5,102,2,0,3,43,4,0,2,102,4,0,6,81,13,0
db 3,102,3,0,1,102,6,0,5,2,14,0,2,43,2,102,7,0,2,102,4,98
db 15,0,3,43,7,0,3,102,3,81,10,0,3,102,3,0,3,43,10,0,2,2
db 16,0,2,102,2,43,3,0,2,102,5,0,1,98,18,0,2,43,1,3,4,102
db 6,0,$FF
;Monsters
db 0,0
; Room name
db CHAR_T, CHAR_R + LC, CHAR_E + LC, CHAR_E + LC
db CHAR_T + LC, CHAR_O + LC, CHAR_P + LC, CHAR_S + LC, 0
; Gems
db 1,72,8,72,23,80,23,80,30,96,14,112

ROOM_29:
db 5,0,1,103,4,0,1,103,5,0,1,88,3,0,2,90,1,69,1,0,1,88
db 2,0,5,90,2,0,1,103,13,0,1,88,3,0,2,90,2,0,1,88,6,0
db 1,90,16,0,1,88,3,0,1,90,1,104,2,0,1,88,6,0,1,90,5,0
db 3,90,1,69,7,0,1,88,3,0,1,90,1,105,2,0,1,88,6,0,1,90
db 6,0,2,69,3,0,1,46,4,0,1,88,3,0,1,90,3,0,1,88,6,0
db 1,90,2,69,4,0,1,103,9,0,1,88,3,0,1,90,1,0,5,69,4,0
db 1,90,14,0,4,69,2,0,1,90,10,0,1,90,20,0,1,90,1,106,9,0
db 1,90,2,0,4,69,5,0,1,46,8,0,1,90,7,0,2,69,1,0,1,90
db 20,0,1,90,6,0,1,69,3,0,1,90,7,0,2,46,11,0,1,90,10,0
db 1,90,20,0,1,90,1,106,9,0,1,90,9,0,3,46,3,0,1,69,2,0
db 1,69,1,88,1,90,4,0,1,69,1,0,1,69,3,0,1,90,19,0,1,88
db 1,90,9,0,1,106,1,90,19,0,1,88,1,90,1,106,9,0,1,90,19,0
db 1,88,1,90,5,0,1,69,1,88,3,0,1,90,19,0,1,88,1,90,6,0
db 1,88,3,0,1,90,17,46,4,90,6,0,1,88,3,0,1,90,$FF

;Monsters
db 3,0
db 16, 18, DATA_SLUDGE, DATA_SLUDGE>>8, 18
db 48, 50, DATA_SLUDGE, DATA_SLUDGE>>8, 50
db 80, 10, DATA_SLUDGE, DATA_SLUDGE>>8, 10
; Room name
db CHAR_S, CHAR_E + LC, CHAR_W + LC, CHAR_E + LC, CHAR_R + LC, CHAR_S + LC, 0
; Gems
db 6,16,11,56,21,80,26,112,6,16,21,80


ROOM_30:
db 6,90,1,92,18,0,1,91,10,90,1,92,19,0,1,91,11,90,20,0,11,90
db 1,92,14,0,1,107,4,108,1,109,2,90,1,92,1,0,1,69,1,110,1,69
db 1,0,3,90,15,0,1,110,4,0,1,110,5,0,1,110,2,0,3,90,15,0
db 1,110,4,0,1,110,5,0,1,110,2,0,2,90,1,92,11,0,1,107,3,108
db 1,111,4,0,1,112,3,108,1,109,1,0,1,110,2,0,2,90,3,108,1,113
db 8,0,1,110,12,0,1,110,1,0,1,110,2,0,2,90,1,69,11,0,1,110
db 12,0,1,110,1,0,1,110,2,0,1,90,1,92,6,0,1,107,5,108,1,111
db 12,0,1,110,1,0,1,110,2,0,1,90,7,0,1,110,18,0,1,110,1,0
db 1,110,2,0,1,90,7,0,1,110,18,0,1,110,1,0,1,110,2,0,1,90
db 4,0,1,114,2,108,1,111,14,0,1,107,1,108,1,109,1,0,1,110,1,0
db 1,110,2,0,1,90,14,0,1,107,4,108,1,113,2,0,1,110,1,0,1,110
db 1,0,1,110,1,0,1,110,2,0,1,90,1,108,1,109,8,0,1,107,3,108
db 1,111,7,0,1,110,1,0,1,112,1,108,1,111,1,0,1,110,2,0,1,90
db 1,69,1,110,8,0,1,110,11,0,1,110,5,0,1,110,2,0,1,90,1,0
db 1,112,1,108,1,3,6,108,1,111,6,0,1,107,2,108,1,109,1,0,1,112
db 5,108,1,111,2,0,1,90,3,0,1,3,9,0,1,114,3,108,1,111,1,0
db 1,115,1,111,10,0,$FF
;Monsters
db 0,0
; Room name
db CHAR_T, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE, CHAR_S, CHAR_N + LC
db CHAR_A + LC, CHAR_K + LC, CHAR_E + LC, CHAR_SPACE, CHAR_N
db CHAR_E + LC, CHAR_S + LC, CHAR_T + LC, 0
; Gems
db 5,40,5,40,12,24,12,24,24,64,24,64


ROOM_34:
db 19,0,2,43,1,3,14,0,3,102,12,0,2,43,1,3,13,0,4,102,7,0
db 2,102,1,3,6,102,12,0,2,102,11,0,1,3,1,0,3,102,1,43,13,0
db 2,102,11,0,1,3,2,0,3,43,13,0,2,102,1,116,4,102,6,0,1,3
db 2,0,3,43,14,0,1,102,1,43,1,102,9,0,1,3,2,0,3,43,15,0
db 1,43,5,0,1,102,3,0,4,102,3,43,4,0,3,102,8,0,1,43,4,0
db 3,102,6,0,3,43,3,0,5,102,7,0,1,43,3,0,5,102,5,0,2,43
db 2,102,3,0,3,102,8,0,1,43,4,0,3,102,6,0,1,43,3,102,4,0
db 1,43,9,0,1,43,5,0,1,43,7,0,3,43,5,0,1,43,9,0,1,43
db 5,0,1,43,4,0,3,102,3,43,5,0,1,43,9,0,1,43,5,0,1,43
db 6,0,3,102,1,43,5,0,1,43,9,0,1,43,5,0,1,43,7,0,3,43
db 5,0,1,43,4,0,1,117,3,0,3,118,1,119,1,118,2,0,1,43,7,0
db 3,43,5,0,1,43,1,0,3,118,1,120,3,0,3,118,1,119,24,118,1,117
db 3,71,3,118,1,119,24,118,$FF
;Monsters
db 0,0
; Room name
db CHAR_F, CHAR_O + LC, CHAR_R + LC, CHAR_E + LC, CHAR_S + LC, CHAR_T + LC
db CHAR_SPACE, CHAR_C, CHAR_L + LC, CHAR_I + LC, CHAR_M + LC, CHAR_B + LC, 0
; Gems
db 14,8,5,32,5,32,11,48,28,48,28,48


ROOM_35:
db 59,0,3,121,28,0,5,121,7,0,3,121,17,0,5,121,6,0,5,121,9,0
db 3,121,4,0,5,121,6,0,5,121,8,0,5,121,4,0,1,121,1,43,1,121
db 5,0,1,121,2,0,3,121,1,0,3,121,5,0,5,121,5,0,1,43,5,0
db 3,121,2,0,1,43,1,0,5,121,5,0,3,121,6,0,1,43,4,0,5,121
db 1,0,1,43,2,0,3,121,7,0,1,43,7,0,1,43,5,0,3,121,2,0
db 1,43,3,0,1,43,8,0,1,43,7,0,1,43,6,0,1,43,3,0,1,43
db 3,0,1,43,8,0,1,43,7,0,1,43,6,0,1,43,3,0,1,43,3,0
db 1,43,8,0,1,43,7,0,1,43,6,0,1,43,3,0,1,43,3,0,1,43
db 8,0,1,43,7,0,1,43,6,0,1,43,3,0,1,43,3,0,1,43,8,0
db 1,43,7,0,1,43,6,0,1,43,3,0,1,43,3,0,1,43,8,0,1,43
db 3,0,1,97,3,0,1,43,3,0,24,118,1,97,31,118,1,97,31,118,1,97
db 7,118,$FF
;Monsters
db 0,0
; Room name
db CHAR_T, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_F, CHAR_O + LC, CHAR_R + LC, CHAR_E + LC, CHAR_S + LC, CHAR_T + LC, 0
; Gems
db 0,0,0,0,0,0,0,0,0,0,0,0



ROOM_36:
db 17,0,1,122,2,123,1,124,11,90,5,0,3,102,18,0,6,90,4,0,5,102
db 18,0,5,90,4,0,5,102,19,0,4,90,5,0,1,102,1,43,1,102,4,0
db 3,102,14,0,3,90,6,0,1,43,4,0,5,102,14,0,2,90,6,0,1,43
db 4,0,5,102,14,0,2,90,6,0,1,43,3,0,3,102,1,43,1,102,5,0
db 2,102,9,0,1,90,6,0,1,43,1,102,5,0,1,43,5,0,4,102,14,0
db 1,102,1,43,1,102,5,0,1,43,5,0,2,102,1,43,1,102,13,0,1,125
db 2,43,1,102,5,0,1,43,6,0,1,102,1,43,14,0,1,126,2,43,6,0
db 1,43,7,0,1,43,15,0,2,43,6,0,1,43,7,0,1,43,8,0,2,90
db 5,0,2,43,6,0,1,43,7,0,1,43,12,0,22,118,8,0,25,118,7,0
db 27,118,5,0,32,118,$FF
;Monsters
db 0,0
; Room name
db CHAR_Z, CHAR_A + LC, CHAR_P + LC, CHAR_SPACE, CHAR_T + LC, CHAR_O + LC, CHAR_SPACE
db CHAR_T + LC, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE, CHAR_E, CHAR_X + LC
db CHAR_T + LC, CHAR_R + LC, CHAR_E + LC, CHAR_M + LC, CHAR_E + LC, 0
; Gems
db 13,16,13,16,13,16,30,112,30,112,30,112


ROOM_37:
db 27,0,1,88,3,0,1,127,27,0,1,88,22,0,2,83,7,0,1,88,21,0
db 5,128,2,0,1,83,2,0,1,88,10,0,1,128,1,83,9,0,5,127,2,0
db 2,128,1,0,1,88,6,0,1,83,3,0,3,128,15,0,2,127,1,0,1,88
db 1,83,5,0,2,128,2,0,3,127,18,0,1,88,1,83,1,128,1,88,3,0
db 2,127,8,0,1,83,12,0,4,128,1,127,1,88,12,0,2,83,1,128,3,0
db 1,88,2,0,1,83,4,0,4,127,1,0,1,88,11,0,5,128,2,0,1,88
db 3,128,9,0,1,88,7,0,1,83,2,128,1,0,5,127,2,0,1,88,3,127
db 9,0,1,88,2,0,1,83,2,0,3,128,2,127,8,0,1,88,12,0,1,88
db 1,0,2,128,2,0,3,127,10,0,1,88,3,0,1,128,1,83,7,0,1,88
db 1,0,2,127,14,0,2,83,3,0,4,128,1,0,1,83,3,0,1,88,10,0
db 2,83,4,0,3,83,1,128,2,0,4,127,1,0,2,83,2,0,1,88,1,128
db 8,0,4,128,2,0,5,128,7,0,6,128,8,0,4,127,2,0,5,127,7,0
db 6,127,32,71,$FF
;Monsters
db 0,0
; Room name
db CHAR_P, CHAR_O + LC, CHAR_L + LC, CHAR_A + LC, CHAR_R + LC, CHAR_SPACE
db CHAR_P, CHAR_A + LC, CHAR_N + LC, CHAR_I + LC, CHAR_C + LC, 0
; Gems
db 2,32,18,8,12,48,10,104,15,104,6,72

ROOM_38:
db 4,0,1,3,31,0,1,3,31,0,1,3,31,0,1,3,31,0,1,3,31,0
db 1,3,31,0,1,3,16,0,1,115,4,108,1,3,4,108,1,109,17,108,1,113
db 8,0,1,3,4,0,1,110,26,0,1,3,4,0,1,110,26,0,1,3,4,0
db 1,110,26,0,1,3,4,0,1,110,26,0,1,3,4,0,1,110,26,0,1,3
db 4,0,1,110,16,0,1,114,14,108,1,111,64,0,9,108,1,3,8,108,1,113
db 22,0,1,3,22,0,$FF

;Monsters
db 4,0
db 8, 76, DATA_SNAKE, DATA_SNAKE>>8, 1
db 48, 102, DATA_SNAKE, DATA_SNAKE>>8, 0
db 88, 76, DATA_SNAKE, DATA_SNAKE>>8, 1
db 176, 80, DATA_SNAKE, DATA_SNAKE>>8, 1
; Room name
db CHAR_S, CHAR_N + LC, CHAR_A + LC, CHAR_K + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_Z, CHAR_O + LC, CHAR_N + LC, CHAR_E + LC, 0
; Gems
db 10,32,4,80,9,80,29,72,4,80,9,80


ROOM_40:
db 1,129,14,0,2,129,14,0,1,129,1,130,10,0,2,131,2,129,1,130,1,132
db 14,0,2,130,9,0,1,82,3,132,1,76,1,132,1,133,14,0,1,134,1,130
db 7,0,1,131,2,129,2,135,3,133,1,76,8,0,2,129,1,136,3,0,1,137
db 1,130,6,0,1,131,2,130,1,138,1,133,1,76,1,133,1,76,10,0,2,132
db 1,136,3,0,2,130,1,139,3,0,1,82,1,129,1,130,1,76,18,0,1,136
db 3,0,2,132,1,139,3,0,1,129,1,130,1,132,1,133,3,0,1,76,14,0
db 1,136,2,129,2,0,1,130,1,139,2,0,1,129,1,130,1,132,3,133,1,0
db 1,76,13,0,2,129,1,82,1,130,1,132,2,0,1,130,1,139,1,0,1,129
db 1,130,1,132,1,76,4,133,12,0,1,82,1,129,2,130,1,129,1,76,3,0
db 1,132,1,139,1,0,2,132,3,0,1,76,1,133,12,0,2,129,1,132,2,138
db 2,132,3,0,1,130,1,139,6,0,4,133,9,0,1,129,1,130,1,132,2,0
db 1,133,5,0,1,130,1,139,6,0,3,133,1,76,9,0,2,132,1,76,2,133
db 1,76,5,0,1,130,2,129,1,140,4,0,1,133,1,76,2,129,5,0,2,129
db 5,0,3,133,5,0,1,129,1,130,1,129,1,141,4,0,2,129,2,130,3,0
db 1,136,2,129,1,130,1,142,3,0,1,133,1,0,4,133,1,0,1,76,1,0
db 2,130,1,132,2,129,1,131,1,129,1,14,1,129,1,130,1,129,1,130,3,0
db 1,136,2,130,1,132,13,129,1,130,1,129,3,130,1,143,1,129,1,14,2,130
db 1,129,1,130,1,129,2,0,1,136,1,130,1,129,2,130,2,129,2,130,1,129
db 1,130,1,129,3,130,1,129,2,130,1,129,1,132,1,130,1,129,1,132,1,130
db 1,129,1,132,1,129,1,132,2,130,2,0,1,136,1,132,1,130,1,132,1,129
db 1,130,1,132,1,129,1,130,1,132,1,130,1,132,1,130,1,132,1,129,1,130
db 2,132,1,129,1,130,2,132,2,129,1,132,1,129,1,132,1,129,1,132,1,143
db 2,0,1,136,1,129,1,132,1,129,2,132,2,129,1,132,3,129,1,132,1,129
db 2,132,1,129,$FF

;Monsters
db 0,2
db 27, 95, DATA_BADCRYSTAL, DATA_BADCRYSTAL>>8, 1
db 154, 95, DATA_BADCRYSTAL, DATA_BADCRYSTAL>>8, 1
; Room name
db CHAR_C, CHAR_R + LC, CHAR_Y + LC, CHAR_S + LC, CHAR_T + LC, CHAR_A + LC, CHAR_L + LC
db CHAR_SPACE, CHAR_F, CHAR_O + LC, CHAR_R + LC, CHAR_E + LC, CHAR_S + LC, CHAR_T + LC, 0
; Gems
db 25,16,11,40,4,80,5,120,24,80,29,88


ROOM_43:
db 5,156,1,157,13,156,1,157,4,156,1,97,1,157,2,156,1,157,5,156,1,157
db 8,156,1,157,3,156,1,157,6,156,1,157,1,156,1,97,5,156,1,157,1,156
db 24,0,1,97,54,0,1,147,31,0,1,148,8,0,1,147,19,0,1,149,2,0
db 1,148,5,0,1,147,2,0,1,148,15,0,1,147,2,0,1,150,4,108,1,151
db 4,0,1,148,2,0,1,148,15,0,1,148,12,0,1,148,2,0,1,148,15,0
db 1,148,12,0,1,148,2,0,1,148,14,0,1,147,1,148,11,0,1,150,1,108
db 1,151,1,0,1,148,14,0,2,148,15,0,1,148,14,0,2,148,15,0,1,148
db 12,0,1,150,3,108,1,151,14,0,1,148,11,0,1,150,5,108,1,151,3,0
db 1,147,2,0,1,150,2,108,1,151,3,0,1,148,10,0,1,150,7,108,1,151
db 2,0,1,148,1,0,1,150,4,108,1,151,2,0,1,148,7,0,1,149,1,0
db 1,150,9,108,1,151,1,0,1,148,1,150,6,108,1,151,1,0,1,148,1,0
db 1,149,1,0,1,149,3,0,30,108,1,151,1,0,$FF
;Monsters
db 0,0
; Room name
db CHAR_G, CHAR_R + LC, CHAR_E + LC, CHAR_E + LC, CHAR_N + LC, CHAR_SPACE
db CHAR_S, CHAR_H + LC, CHAR_I + LC, CHAR_L + LC, CHAR_L + LC, 0
; Gems
db 8,48,24,32,8,48,7,72,14,104,21,40


ROOM_44:
db 34,156,1,206,2,156,1,206,7,156,1,206,7,156,1,206,5,156,1,206,4,156
db 33,0,1,207,31,0,1,148,31,0,1,148,31,0,1,148,1,0,1,207,29,0
db 1,148,1,0,1,148,3,0,1,207,3,0,1,208,16,0,1,209,4,0,1,148
db 1,0,1,148,1,0,1,207,1,0,1,148,6,0,1,208,12,0,1,150,1,108
db 4,0,1,148,1,0,1,148,1,0,1,148,1,0,1,148,20,0,2,208,3,0
db 1,148,1,0,1,148,1,0,1,148,1,0,1,148,4,0,1,208,3,0,4,208
db 6,0,4,208,3,0,1,148,1,0,1,148,1,0,1,148,1,0,1,148,5,0
db 1,207,1,0,1,208,4,210,1,208,4,0,1,208,3,210,1,208,1,0,1,207
db 1,0,1,148,1,0,1,148,1,0,1,148,1,0,1,148,5,0,1,148,1,208
db 4,210,1,208,1,0,1,208,2,0,1,208,4,210,1,208,1,0,1,148,1,0
db 1,148,1,0,1,148,1,0,1,148,1,0,1,148,5,0,1,148,4,210,1,208
db 5,0,1,208,3,210,1,208,2,0,1,148,1,0,1,148,1,0,1,148,1,0
db 1,148,1,0,1,148,5,0,1,148,3,210,1,208,5,0,1,208,3,210,1,208
db 3,0,1,148,1,0,1,148,1,0,1,148,1,0,1,148,1,0,1,148,5,0
db 1,148,1,210,1,208,2,210,5,0,2,210,1,208,2,210,3,0,1,148,1,207
db 1,148,1,0,1,148,1,207,1,148,1,0,1,148,1,0,1,207,3,0,1,148
db 4,210,5,0,5,210,3,0,1,148,1,150,10,108,2,208,1,148,18,208,$FF
;Monsters
db 0,0
; Room name
db CHAR_R, CHAR_A + LC, CHAR_V + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_O, CHAR_C + LC, CHAR_E + LC, CHAR_A + LC, CHAR_N + LC, 0
; Gems
db 1,8,9,40,18,96,27,56,27,104,28,96


ROOM_45:
db 5,156,1,157,13,156,1,157,5,156,1,157,2,156,1,157,5,156,1,157,8,156
db 1,157,3,156,1,157,6,156,1,157,7,156,1,157,1,156,19,0,2,158,6,0
db 1,121,22,0,4,158,4,0,3,121,21,0,4,158,3,0,5,121,7,0,1,121
db 13,0,2,158,5,0,1,121,1,159,1,121,7,0,3,121,20,0,1,159,7,0
db 5,121,19,0,1,159,8,0,1,121,1,159,1,121,17,0,8,160,5,0,1,159
db 6,0,1,160,1,0,1,160,1,0,1,160,1,0,1,160,4,0,1,160,13,0
db 1,159,4,0,1,160,11,0,1,160,9,0,10,160,11,0,1,160,106,0,32,161
db 32,162,32,163,$FF
;Monsters
db 0,0
; Room name
db CHAR_O, CHAR_H + LC, CHAR_SPACE, CHAR_D, CHAR_E + LC, CHAR_A + LC
db CHAR_R + LC, CHAR_Y + LC, CHAR_SPACE, CHAR_M, CHAR_E + LC, 0
; Gems
db 3,64,7,64,11,72,20,56,25,40,29,40

ROOM_46:
db 9,0,1,3,31,0,1,3,12,0,5,121,9,0,1,121,4,0,1,3,7,0
db 2,160,3,0,6,121,7,0,3,121,3,0,1,3,4,0,2,160,5,0,4,121
db 1,159,8,0,5,121,4,0,2,160,7,0,5,121,1,159,2,121,7,0,1,121
db 1,159,1,121,13,0,3,121,3,159,5,121,6,0,1,159,4,0,2,160,11,0
db 1,159,2,0,4,121,7,0,1,159,7,0,2,160,8,0,1,159,9,0,4,160
db 1,159,10,0,2,160,2,0,6,164,1,41,4,164,5,0,1,160,1,159,16,0
db 1,27,1,0,2,27,1,41,1,0,1,27,7,0,1,160,1,159,15,0,4,164
db 2,41,3,164,6,0,1,160,1,159,16,0,1,27,2,0,1,41,2,0,1,27
db 7,0,1,160,1,159,16,0,1,27,1,0,2,41,2,0,1,27,7,0,1,160
db 1,159,16,0,1,27,1,0,1,41,3,0,1,27,7,0,1,160,1,159,16,0
db 1,27,1,0,1,41,3,0,1,27,7,0,12,160,1,165,16,164,15,0,1,165
db 16,1,15,0,1,165,16,1,$FF
;Monsters
db 0,0
; Room name
db CHAR_S, CHAR_P + LC, CHAR_L + LC, CHAR_I + LC, CHAR_T + LC, CHAR_SPACE
db CHAR_P, CHAR_E + LC, CHAR_R + LC, CHAR_S + LC, CHAR_O + LC, CHAR_N + LC
db CHAR_A + LC, CHAR_L + LC, CHAR_I + LC, CHAR_T + LC, CHAR_Y + LC, 0
; Gems
db 28,32,27,8,21,16,15,16,6,24,2,24


ROOM_47:
db 30,0,1,97,1,202,30,0,1,97,1,202,30,0,1,97,1,202,30,0,1,97
db 1,202,16,0,1,204,13,0,1,97,1,202,4,0,1,204,7,0,1,204,7,0
db 1,204,7,0,1,204,1,0,1,97,1,202,8,0,1,204,15,0,1,204,5,0
db 1,97,1,202,30,0,1,97,1,202,30,0,1,97,1,202,30,0,1,97,1,202
db 30,0,1,97,1,202,30,0,1,97,1,202,30,0,1,97,1,202,30,0,1,97
db 1,202,4,0,1,204,7,0,1,204,7,0,1,204,7,0,1,204,1,0,1,97
db 1,202,1,204,7,0,1,204,7,0,1,204,7,0,1,204,5,0,1,97,1,202
db 30,205,1,97,31,202,1,97,1,202,$FF
;Monsters
db 0,0
; Room name
db CHAR_J, CHAR_U + LC, CHAR_M + LC, CHAR_P + LC, CHAR_SPACE
db CHAR_A, CHAR_H + LC, CHAR_E + LC, CHAR_A + LC, CHAR_D + LC, 0
; Gems
db 4,24,4,24,4,24,4,24,4,24,4,24


ROOM_50:
db 10,0,1,119,6,0,1,119,4,0,1,119,19,0,1,119,6,0,1,119,4,0
db 1,119,19,0,1,119,6,0,1,119,4,0,1,119,19,0,1,119,6,0,1,119
db 4,0,1,119,14,0,1,80,4,0,1,119,6,0,1,119,4,0,1,119,16,0
db 3,80,1,119,6,80,1,119,4,80,1,119,1,80,1,0,1,119,3,0,2,80
db 2,0,2,80,7,0,1,119,4,0,1,166,1,0,1,119,4,0,1,119,2,0
db 1,119,1,80,15,0,1,119,4,0,1,166,1,0,1,119,4,0,1,119,2,0
db 1,119,16,0,1,119,4,0,1,166,1,0,1,119,4,0,1,119,2,0,1,119
db 13,0,1,119,2,0,1,119,4,0,1,166,1,0,1,119,1,0,5,80,1,0
db 1,119,13,0,1,119,4,80,3,0,1,166,1,0,1,119,3,0,1,166,3,0
db 1,119,13,0,1,119,2,0,1,166,3,0,1,80,1,166,1,0,1,119,3,0
db 1,166,3,0,1,80,13,0,1,119,2,0,1,166,4,0,1,166,1,0,1,119
db 3,0,1,166,10,0,4,80,3,0,1,119,2,0,1,166,4,0,1,166,1,0
db 1,119,3,0,1,166,6,0,4,80,1,0,1,166,5,0,1,119,2,0,1,166
db 4,0,1,166,1,0,8,80,5,0,1,166,2,0,1,166,3,0,9,80,1,0
db 1,166,3,0,1,166,1,0,1,166,8,0,1,166,2,0,1,166,8,0,1,166
db 4,0,1,166,3,0,1,166,1,0,1,166,8,0,1,166,1,0,32,18,$FF
;Monsters
db 2,0
db 24, 18, DATA_BERRY, DATA_BERRY>>8, 1
db 208, 66, DATA_BERRY, DATA_BERRY>>8, 1
; Room name
db CHAR_C, CHAR_L + LC, CHAR_O + LC, CHAR_S + LC, CHAR_I + LC, CHAR_N + LC, CHAR_G + LC
db CHAR_SPACE, CHAR_T, CHAR_I + LC, CHAR_M + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_A + LC, CHAR_T + LC, CHAR_SPACE, CHAR_T + LC, CHAR_H + LC, CHAR_E + LC
db CHAR_SPACE, CHAR_M, CHAR_A + LC, CHAR_L + LC, CHAR_L + LC, 0
; Gems
db 1,40,30,32,14,80,20,64,9,112,23,104


ROOM_52:
db 13,0,1,148,31,0,1,167,26,0,1,168,2,0,1,168,1,0,1,169,1,168
db 3,0,1,168,18,0,1,150,14,108,1,151,3,0,1,169,23,0,1,168,2,0
db 1,168,4,0,1,169,1,168,22,0,1,150,7,108,1,169,2,108,1,151,10,0
db 1,170,17,0,1,169,11,0,1,168,1,0,1,170,2,0,1,168,3,0,1,168
db 6,0,1,168,3,0,1,169,3,0,1,168,5,0,1,150,3,108,1,169,23,108
db 1,151,7,0,1,169,31,0,1,169,29,0,1,168,1,0,1,169,2,0,1,168
db 7,0,1,171,17,0,1,150,6,108,1,151,2,0,1,168,1,0,1,168,1,0
db 1,170,1,0,1,168,25,0,1,150,3,108,1,170,2,108,1,151,28,0,1,169
db 7,0,1,168,3,0,1,168,8,0,1,168,2,0,1,168,1,0,1,168,5,0
db 1,169,6,0,1,112,4,108,1,151,7,0,1,150,5,108,1,151,5,0,1,169
db 31,0,1,169,14,0,$FF
;Monsters
db 0,0
; Room name
db CHAR_O, CHAR_P + LC, CHAR_I + LC, CHAR_U + LC, CHAR_M + LC, CHAR_SPACE
db CHAR_G, CHAR_A + LC, CHAR_R + LC, CHAR_D + LC, CHAR_E + LC, CHAR_N + LC
db CHAR_S + LC, 0
; Gems
db 6,16,27,32,5,88,8,120,14,96,27,112

ROOM_54:
db 12,1,1,41,19,1,23,164,1,1,1,41,4,1,1,41,2,1,23,0,1,1
db 1,41,3,1,1,41,3,1,23,0,9,164,44,0,7,164,13,0,1,164,2,41
db 9,164,4,1,1,0,1,41,14,0,1,1,2,41,9,0,1,172,1,164,1,173
db 1,1,1,0,1,41,14,0,1,1,1,0,1,41,9,0,1,174,1,164,1,174
db 1,1,1,0,1,41,14,0,1,1,1,0,1,41,9,0,1,175,1,164,1,176
db 1,1,1,0,1,41,1,0,1,172,1,164,1,173,1,172,1,164,1,173,11,164
db 2,41,10,164,1,0,1,41,1,0,1,174,1,41,2,174,1,164,1,174,2,1
db 1,177,2,1,1,177,1,1,1,173,3,1,2,41,2,0,1,41,2,0,2,41
db 1,0,1,41,2,0,1,41,1,0,1,175,1,164,1,176,1,175,1,164,1,176
db 3,1,1,177,1,1,1,177,1,1,1,174,3,1,1,0,1,41,2,0,1,41
db 2,0,1,41,2,0,1,41,2,0,1,41,1,0,3,164,1,41,4,164,3,1
db 1,177,1,1,1,176,3,1,1,0,1,41,2,0,1,41,2,0,1,41,2,0
db 1,41,2,0,1,41,3,0,1,172,1,164,1,173,1,172,1,41,1,173,1,172
db 1,164,1,173,2,1,1,164,3,1,1,0,1,41,2,0,1,41,2,0,1,41
db 2,0,1,41,2,0,1,41,3,0,1,174,1,164,2,174,1,41,2,174,1,164
db 1,174,2,1,1,172,1,164,1,41,1,1,1,0,1,41,2,0,1,41,5,0
db 1,41,6,0,1,175,1,164,1,176,1,175,1,164,1,176,1,175,1,164,1,176
db 2,1,1,174,1,164,1,41,1,1,4,0,1,41,12,0,7,164,1,41,1,164
db 2,1,1,175,1,164,1,176,1,1,17,0,8,1,1,41,2,1,$FF
;Monsters
db 0,3
db 161, 16, DATA_BOTTLE, DATA_BOTTLE>>8, 1
db 82, 63, DATA_BOTTLE, DATA_BOTTLE>>8, 1
db 88, 119, DATA_BOTTLE, DATA_BOTTLE>>8, 1
; Room name
db CHAR_W, CHAR_I + LC, CHAR_N + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_C, CHAR_E + LC, CHAR_L + LC, CHAR_L + LC, CHAR_A + LC, CHAR_R + LC, 0
; Gems
db 6,104,9,112,12,104,15,96,7,64,20,24


ROOM_55:
db 30,202,1,97,2,202,1,97,26,0,1,97,1,202,1,97,2,202,1,97,26,0
db 1,97,1,202,1,97,2,202,1,97,26,202,1,97,1,202,1,97,2,202,1,97
db 1,202,1,97,22,0,1,97,1,202,1,97,1,202,1,97,1,202,1,0,1,97
db 1,202,1,97,22,0,1,97,1,202,1,97,1,202,1,97,1,202,1,0,1,97
db 1,202,1,97,22,202,1,97,1,202,1,97,1,202,1,97,1,202,1,0,1,97
db 1,202,1,97,2,202,1,97,1,0,1,97,1,202,1,97,1,0,1,97,1,202
db 1,97,1,0,1,97,1,202,1,97,1,0,1,97,1,202,1,97,1,0,1,97
db 1,202,1,97,1,202,1,97,1,202,1,97,1,202,1,0,1,97,1,202,1,97
db 1,202,1,204,1,97,1,0,1,97,1,204,1,97,1,0,1,97,1,204,1,97
db 1,0,1,97,1,204,1,97,1,0,1,97,1,204,1,97,1,0,1,97,1,202
db 1,97,1,202,1,97,1,202,1,97,1,202,1,0,1,97,1,202,1,97,1,202
db 1,0,1,97,1,204,1,97,1,0,1,97,1,204,1,97,1,0,1,97,1,204
db 1,97,1,0,1,97,1,204,1,97,1,0,1,97,1,204,1,97,1,0,1,97
db 1,202,1,97,1,202,1,97,2,202,1,97,1,202,1,97,1,202,1,0,1,97
db 1,202,1,97,1,0,1,97,1,202,1,97,1,0,1,97,1,202,1,97,1,0
db 1,97,1,202,1,97,1,0,1,97,1,202,1,97,1,0,1,97,1,202,1,97
db 1,202,1,97,2,202,1,97,1,202,1,97,24,202,1,97,1,202,1,97,2,202
db 1,97,1,202,1,97,24,0,1,97,1,202,1,97,2,202,1,97,1,202,1,97
db 24,0,1,97,1,202,1,97,2,202,1,97,28,202,1,97,2,202,1,97,28,0
db 1,97,2,202,1,97,28,0,1,97,31,202,1,97,1,202,$FF
;Monsters
db 0,0
; Room name
db CHAR_D, CHAR_E + LC, CHAR_S + LC, CHAR_I + LC, CHAR_R + LC, CHAR_E + LC, 0
; Gems
db 5,80,5,80,5,80,5,80,5,80,5,80

ROOM_57:
db 1,178,13,2,1,178,2,0,1,3,1,178,12,2,2,178,13,2,1,178,2,0
db 1,3,1,178,12,2,2,178,3,2,1,178,1,179,2,178,2,2,5,178,2,0
db 1,3,15,178,3,2,1,178,1,0,1,180,1,178,2,2,1,178,6,0,1,3
db 3,0,1,181,3,179,7,0,1,178,3,2,1,178,2,0,4,178,2,0,2,83
db 2,0,1,3,4,0,3,179,7,0,5,178,17,0,1,181,2,179,55,0,4,83
db 24,0,3,83,1,0,4,83,24,0,3,83,3,0,1,180,2,83,1,0,3,83
db 15,0,2,83,12,0,1,180,2,83,7,0,4,178,4,0,3,83,4,0,3,83
db 6,0,1,180,1,83,6,0,1,178,2,2,1,178,4,0,1,180,2,83,4,0
db 3,83,7,0,1,180,3,83,3,0,1,178,2,2,1,178,22,0,3,83,3,0
db 1,178,2,2,1,178,8,0,1,83,7,0,1,83,11,0,1,178,2,2,30,178
db 30,2,2,178,30,2,1,178,$FF
;Monsters
db 0,0
; Room name
db CHAR_S, CHAR_P + LC, CHAR_A + LC, CHAR_N + LC, CHAR_N + LC, CHAR_E + LC
db CHAR_R + LC, CHAR_S + LC, CHAR_SPACE, CHAR_I + LC, CHAR_N + LC, CHAR_SPACE
db CHAR_T + LC, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE, CHAR_W
db CHAR_O + LC, CHAR_R + LC, CHAR_K + LC, CHAR_S + LC, 0
; Gems
db 12,48,12,48,28,72,28,72,14,104,22,104


ROOM_58:
db 35,182,26,14,6,182,26,0,6,182,11,0,1,139,14,0,6,182,11,0,1,139
db 14,0,6,182,6,0,1,139,4,0,1,139,3,0,1,139,7,0,1,139,2,0
db 3,182,5,0,1,139,3,0,1,139,4,0,1,139,3,0,1,139,7,0,1,139
db 10,0,1,139,3,0,1,139,4,0,1,139,3,0,1,139,7,0,1,139,10,0
db 1,139,3,0,1,139,9,0,4,183,3,0,1,139,10,0,1,139,4,0,3,183
db 13,0,1,139,10,0,1,139,20,0,1,139,5,0,3,182,26,0,6,182,26,0
db 6,182,25,18,1,184,6,182,26,183,99,182,$FF

;Monsters
db 3,0
db 56, 86, DATA_PIGEON, DATA_PIGEON>>8, 1
db 128, 48, DATA_PIGEON, DATA_PIGEON>>8, 0
db 192, 80, DATA_PIGEON, DATA_PIGEON>>8, 1
; Room name
db CHAR_H, CHAR_A + LC, CHAR_L + LC, CHAR_L + LC, CHAR_SPACE, CHAR_O + LC, CHAR_F + LC
db CHAR_SPACE, CHAR_T, CHAR_H + LC, CHAR_E + LC, CHAR_SPACE, CHAR_S, CHAR_Q + LC
db CHAR_U + LC, CHAR_I + LC, CHAR_G + LC, CHAR_E + LC, CHAR_O + LC, CHAR_N + LC, 0

; Gems
db 3,72,10,64,12,48,17,48,22,56,27,80


ROOM_60:
db 17,0,1,185,31,0,1,185,31,0,1,185,31,0,1,185,9,0,1,185,4,0
db 1,2,1,0,10,2,1,0,4,2,1,185,4,2,1,0,4,2,1,185,4,2
db 5,0,1,186,1,187,1,188,2,189,1,190,6,0,1,185,9,0,1,185,8,0
db 1,185,12,0,1,185,9,0,1,185,8,0,1,185,12,0,1,185,9,0,1,185
db 4,0,1,2,1,0,2,2,1,185,7,2,1,0,4,2,1,185,4,2,1,0
db 9,2,4,0,1,185,2,0,1,186,1,187,8,0,1,185,8,0,1,191,1,192
db 1,191,1,193,6,0,1,185,3,0,1,185,8,0,1,185,18,0,1,185,3,0
db 1,185,8,0,1,185,9,0,1,185,4,0,1,2,1,0,6,2,1,185,3,2
db 1,0,9,2,1,0,4,2,1,185,4,2,4,0,1,186,1,187,2,0,1,185
db 7,0,1,186,1,187,1,188,2,189,1,190,5,0,1,185,12,0,1,185,18,0
db 1,185,12,0,1,185,18,0,1,185,12,0,1,185,18,0,1,185,4,0,32,2,$FF

;Monsters
db 0,2
db 84, 15, DATA_LOVEMAN, DATA_LOVEMAN>>8, 1
db 163, 119, DATA_LOVEMAN, DATA_LOVEMAN>>8, 1
; Room name
db CHAR_L, CHAR_O + LC, CHAR_V + LC, CHAR_E + LC, CHAR_SPACE
db CHAR_M, CHAR_O + LC, CHAR_T + LC, CHAR_E + LC, CHAR_L + LC, 0

; Gems
db 4,24,2,88,8,56,21,88,30,56,30,88


ROOM_62:
db 4,1,17,0,15,1,17,0,15,1,17,0,15,1,11,0,1,172,16,164,4,1
db 11,0,1,174,144,0,4,1,17,0,6,164,1,41,4,164,4,194,17,0,6,1
db 1,41,4,1,4,194,17,0,2,1,2,0,2,194,1,41,4,194,4,1,17,0
db 1,1,1,41,2,0,2,1,2,41,7,194,17,0,1,194,1,41,3,0,1,194
db 2,41,1,195,2,194,4,1,17,0,1,1,1,41,1,1,2,0,2,1,2,41
db 6,194,10,0,1,174,1,0,1,174,4,0,2,41,1,194,4,0,2,41,6,194
db 10,0,1,175,1,164,1,176,4,0,2,41,1,194,4,0,2,41,34,194,$FF

;Monsters
db 5,1
db 168, 56, DATA_BAT, DATA_BAT>>8, 1
db 176, 40, DATA_BAT, DATA_BAT>>8, 0
db 192, 112, DATA_BAT, DATA_BAT>>8, 0
db 120, 42, DATA_WATER, DATA_WATER>>8, 42
db 120, 82, DATA_WATER, DATA_WATER>>8, 42
db 63, 127, DATA_CAVEBUG, DATA_CAVEBUG>>8, 0
; Room name
db CHAR_T, CHAR_H + LC, CHAR_E + LC, 255
db CHAR_H, CHAR_O + LC, CHAR_L + LC, CHAR_E + LC, 0
; Gems
db 3,64,20,8,21,48,3,64,20,8,15,120


ROOM_63:
db 1,1,1,174,1,172,17,164,1,176,1,175,5,164,1,176,1,0,1,3,1,0
db 1,174,1,1,2,174,26,0,1,3,1,0,1,174,1,1,2,174,26,0,1,3
db 1,0,1,174,1,164,1,176,1,174,26,0,1,3,1,0,1,174,2,0,1,175
db 3,164,1,173,2,0,15,164,1,173,3,0,1,172,2,164,1,176,6,0,1,174
db 7,0,1,174,9,0,1,174,3,0,1,175,2,164,1,173,6,0,1,174,1,173
db 6,0,1,174,4,0,1,174,4,0,1,175,1,164,5,0,1,174,6,0,1,174
db 1,200,3,164,1,173,2,0,1,174,2,0,4,164,1,173,9,0,1,174,6,0
db 1,174,7,0,1,174,6,0,1,174,5,0,1,172,1,173,2,0,1,174,1,164
db 1,173,1,164,3,0,1,174,6,0,1,172,1,174,1,173,5,0,1,174,5,164
db 1,176,1,174,2,0,1,174,1,172,1,176,3,0,9,164,1,176,4,164,2,0
db 1,174,6,0,1,174,1,0,1,164,2,174,5,0,1,174,14,0,1,174,6,0
db 1,174,2,0,2,174,5,0,1,174,14,0,1,174,6,0,1,174,2,0,2,174
db 2,0,3,164,1,176,6,0,8,164,1,176,6,0,1,176,1,164,1,0,2,174
db 23,0,1,172,1,173,5,0,1,174,1,175,1,173,7,0,1,172,1,173,13,0
db 2,174,5,0,1,174,1,194,1,174,7,0,2,174,12,0,1,172,2,174,1,173
db 3,0,1,172,1,174,1,194,1,175,7,164,1,176,1,175,13,164,1,176,1,175
db 5,164,1,176,$FF
;Monsters
db 0,0
; Room name
db CHAR_P, CHAR_U + LC, CHAR_R + LC, CHAR_P + LC, CHAR_L + LC, CHAR_E + LC
db CHAR_SPACE, CHAR_S, CHAR_K + LC, CHAR_E + LC, CHAR_I + LC, CHAR_N + LC, 0
; Gems
db 3,16,21,48,8,72,7,96,3,16,21,48






ROOM_TEMP:
db 200,3,200,3,176,3,$FF
db 0,0,0
db 1,1,1,1,1,1,1,1,1,1,1,1


DATA_ROOM_LIST:
db ROOM_TEMP>>8,ROOM_TEMP,ROOM_1>>8,ROOM_1,ROOM_2>>8,ROOM_2,ROOM_3>>8,ROOM_3
db ROOM_TEMP>>8,ROOM_TEMP,ROOM_5>>8,ROOM_5,ROOM_6>>8,ROOM_6,ROOM_7>>8,ROOM_7

db ROOM_8>>8,ROOM_8,ROOM_9>>8,ROOM_9,ROOM_10>>8,ROOM_10,ROOM_11>>8,ROOM_11
db ROOM_TEMP>>8,ROOM_TEMP,ROOM_13>>8,ROOM_13,ROOM_14>>8,ROOM_14,ROOM_15>>8,ROOM_15

db ROOM_TEMP>>8,ROOM_TEMP,ROOM_17>>8,ROOM_17,ROOM_18>>8,ROOM_18,ROOM_TEMP>>8,ROOM_TEMP
db ROOM_TEMP>>8,ROOM_TEMP,ROOM_21>>8,ROOM_21,ROOM_22>>8,ROOM_22,ROOM_TEMP>>8,ROOM_TEMP

db ROOM_24>>8,ROOM_24,ROOM_25>>8,ROOM_25,ROOM_26>>8,ROOM_26,ROOM_TEMP>>8,ROOM_TEMP
db ROOM_TEMP>>8,ROOM_TEMP,ROOM_29>>8,ROOM_29,ROOM_30>>8,ROOM_30,ROOM_TEMP>>8,ROOM_TEMP

db ROOM_TEMP>>8,ROOM_TEMP,ROOM_TEMP>>8,ROOM_TEMP,ROOM_34>>8,ROOM_34,ROOM_35>>8,ROOM_35
db ROOM_36>>8,ROOM_36,ROOM_37>>8,ROOM_37,ROOM_38>>8,ROOM_38,ROOM_TEMP>>8,ROOM_TEMP

db ROOM_40>>8,ROOM_40,ROOM_TEMP>>8,ROOM_TEMP,ROOM_TEMP>>8,ROOM_TEMP,ROOM_43>>8,ROOM_43
db ROOM_44>>8,ROOM_44,ROOM_45>>8,ROOM_45,ROOM_46>>8,ROOM_46,ROOM_47>>8,ROOM_47

db ROOM_TEMP>>8,ROOM_TEMP,ROOM_TEMP>>8,ROOM_TEMP,ROOM_50>>8,ROOM_50,ROOM_TEMP>>8,ROOM_TEMP
db ROOM_52>>8,ROOM_52,ROOM_TEMP>>8,ROOM_TEMP,ROOM_54>>8,ROOM_54,ROOM_55>>8,ROOM_55

db ROOM_TEMP>>8,ROOM_TEMP,ROOM_57>>8,ROOM_57,ROOM_58>>8,ROOM_58,ROOM_TEMP>>8,ROOM_TEMP
db ROOM_60>>8,ROOM_60,ROOM_TEMP>>8,ROOM_TEMP,ROOM_62>>8,ROOM_62,ROOM_63>>8,ROOM_63


 
;==============================================================
; Utility Functions
;==============================================================
 
;--------------------------------------------------------------
PROC
proc_clear_screen_pixels
;--------------------------------------------------------------
    ; IN: -
    ; OUT: -
    ; Affects hl, de, bc
 
    ld hl, SCREEN_PIXEL_START
    ld de, SCREEN_PIXEL_START + 1
    ld bc, SCREEN_PIXEL_SIZE - 1
    ld (hl), 0
    ldir
ret
ENDP
 
;--------------------------------------------------------------
PROC
proc_fill_screen_attribute:
;--------------------------------------------------------------
    ; IN:   a = attribute
    ; OUT:  -  
    ; AFFECTS: hl, de, bc
 
    ld hl, SCREEN_ATTRIBUTE_START
    ld de, SCREEN_ATTRIBUTE_START + 1
    ld bc, SCREEN_ATTRIBUTE_SIZE - 1
    ld (hl), a
    ldir
ret
ENDP
 
;-------------------------------------------------------------
PROC
proc_get_screen_attribute_address:
;-------------------------------------------------------------
    ; IN: b = y-cell coord (0..23), c: x-cell coord (0..31)
    ; OUT: hl = attribute address
    ; AFFECTS: hl, de, a
   
    ; Explanation
    ; b = -- -- -- y4 y3 y2 y1 y0
    ; c = -- -- -- x4 x3 x2 x1 x0
    ; hl = addr + y * 32 + x = addr + de
    ; y7 y6 y5 and x7 x6 x5 are all zero since x,y<32
    ; de = -- -- -- -- -- -- y4 y3|y2 y1 y0 x4 x3 x2 x1 x0
    ;      -----------d-----------|------------e----------
 
    ; put y4 y3 into lower two bits in d
    ld a, b
    and $18
    sra a
    sra a
    sra a
    ld d, a
 
    ; put y2..y0 in upper bits of e
    ld a, b
    sla a
    sla a
    sla a
    sla a
    sla a
 
    ; put x4...x0 in lower bits of e
    add a, c
    ld e, a
 
    ld hl, SCREEN_ATTRIBUTE_START
    add hl, de
ret
ENDP
 
;-------------------------------------------------------------
PROC
proc_get_screen_pixel_address:
;-------------------------------------------------------------
    ; IN: b = y-pixel coord (0..191), c: x-cell coord (0..31)
    ; OUT: hl = screen address
    ; AFFECTS: hl, de, a
 
    ld a, b         ; Work on the upper byte of the address
    and %00000111   ; a = Y2 Y1 y0
    or %01000000    ; first three bits are always 010
    ld h,a          ; store in h
    ld a,b          ; get bits Y7, Y6
    rra             ; move them into place
    rra             ;
    rra             ;
    and %00011000   ; mask off
    or h            ; a = 0 1 0 Y7 Y6 Y2 Y1 Y0
    ld h,a          ; calculation of h is now complete
    ld a,b          ; get y
    rla             ;
    rla             ;
    and %11100000   ; a = y5 y4 y3 0 0 0 0 0
    ld l,a          ; store in l
    ld a,c          ;
    and %00011111   ; a = X4 X3 X2 X1
    or l            ; a = Y5 Y4 Y3 X4 X3 X2 X1
    ld l,a          ; calculation of l is complete
ret
ENDP
 

;-------------------------------------------------------------
PROC
proc_get_cell_coord:
;-------------------------------------------------------------
    ; IN: b = y-pixel coord (0..191), c: x-pixel coord (0..248)
    ; OUT: b = y-cell coord (0..23), c: x-pixel coord (0..31)
    ; AFFECTS: a, b, c
	ld a,b
	ccf
	and %11111000
	rra
	rra
	rra
	ld b,a
	ld a,c
	and %11111000
	rra
	rra
	rra
	ld c,a
ret
ENDP

;-------------------------------------------------------------
PROC
proc_get_cell_index:
;-------------------------------------------------------------
    ; IN: b = y-cell coord (0..23), c: x-pixel coord (0..31)
    ; OUT: hl = cell index (0..767)
    ; AFFECTS: a, b, c, hl
	ld a,b
	ccf
	and %11111000
	rra
	rra
	rra
	ld b,a
	ld a,c
	and %11111000
	rra
	rra
	rra
	ld c,a
ret
ENDP


;-------------------------------------------------------------
PROC
proc_move_player_right:
;-------------------------------------------------------------
	inc b
	inc d
	ld hl, DATA_ZIGGY_RIGHT
	ld (PLAYER_SPRITE), hl
ret
ENDP

;-------------------------------------------------------------
PROC
proc_move_player_left:
;-------------------------------------------------------------
	dec b
	inc d
	ld hl, DATA_ZIGGY_LEFT
	ld (PLAYER_SPRITE), hl
ret
ENDP

;-------------------------------------------------------------
PROC
proc_move_player_out_walls:
;-------------------------------------------------------------
	ld a,(PLAYER_X)
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(PLAYER_Y)
	add a,15
	ld b,a
	push bc
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	jr nz, proc_move_player_out_walls_right
	pop bc
	push bc
	ld a,b
	sub 8
	ld b,a
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	jr z, proc_move_player_out_walls2
proc_move_player_out_walls_right:
	ld a,(PLAYER_X)
	add a,1
	ld (PLAYER_X),a
proc_move_player_out_walls2:
	pop bc
	push bc
	inc c
	push bc
	call proc_get_block_properties
	pop bc
	bit BLOCK_COLLISION_BIT,a
	jr nz, proc_move_player_out_walls_left
	ld a,b
	sub 8
	ld b,a
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	jr z, proc_move_player_out_walls3
proc_move_player_out_walls_left:
	ld a,(PLAYER_X)
	dec a
	ld (PLAYER_X),a
proc_move_player_out_walls3:
	pop bc
	ld a,b
	sub 12
	ret c
	ld b,a
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	ret z
	ld a,(PLAYER_VEL)
	ld a,1
	ld (PLAYER_VEL),a
ret
ENDP

;-------------------------------------------------------------
PROC
proc_check_transition:
;-------------------------------------------------------------
	ld a,(PLAYER_X)
	ld b,a
	ld a, 245
	cp b
	jr nc, proc_check_transition2
	ld a,8
	ld (PLAYER_X),a
	ld a,(CURRENT_ROOM_NUMBER)
	inc a
	and MAP_WIDTH-1
	ld c,a
	ld a,(CURRENT_ROOM_NUMBER)
	and ROOM_BITS & (~(MAP_WIDTH-1))
	add a,c
	ld (CURRENT_ROOM_NUMBER),a
	call proc_load_map
	ret
proc_check_transition2:
	ld a,2
	cp b
	jr c, proc_check_transition3
	ld a,240
	ld (PLAYER_X),a
	ld a,(CURRENT_ROOM_NUMBER)
	dec a
	and MAP_WIDTH-1
	ld c,a
	ld a,(CURRENT_ROOM_NUMBER)
	and ROOM_BITS & (~(MAP_WIDTH-1))
	add a,c
	ld (CURRENT_ROOM_NUMBER),a
	call proc_load_map
	ret
proc_check_transition3:
	ld a,(PLAYER_Y)
	ld b,a
	ld a,128
	cp b
	jr nc, proc_check_transition4
	ld a,160
	cp b
	jr c, proc_check_transition4
	ld a,0
	ld (PLAYER_Y),a
	ld a,(CURRENT_ROOM_NUMBER)
	add a,MAP_WIDTH
	and ROOM_BITS
	ld (CURRENT_ROOM_NUMBER),a
	call proc_load_map
	ret
proc_check_transition4:
	ld a,244
	cp b
	ret nc
	ld a, 118
	ld (PLAYER_Y),a
	ld a,(CURRENT_ROOM_NUMBER)
	sub MAP_WIDTH
	and ROOM_BITS
	ld (CURRENT_ROOM_NUMBER),a
	call proc_load_map
ret
ENDP

;-------------------------------------------------------------
PROC
proc_check_player_collect:
;-------------------------------------------------------------
	ld a,(PLAYER_X)
	add a,4
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(PLAYER_Y)
	add a,16
	ld e,a
	ld ix,CURRENT_ROOM_GEMS
	ld d,1
proc_check_player_collect_loop:
	ld a,(ix)
	cp $FF
	jr z,proc_check_player_collect_loop_end
	cp c
	jr nz,proc_check_player_collect_loop_end
	ld a,(ix+1)
	cp e
	jr nc,proc_check_player_collect_loop_end
	add a,4
	ld hl,PLAYER_Y
	cp (hl)
	jr c,proc_check_player_collect_loop_end
	ld hl,COLLECTED_GEMS
	ld a,(CURRENT_ROOM_NUMBER)
	ld b,0
	ld c,a
	add hl,bc
	ld a,(hl)
	or d
	ld (hl),a
	call proc_set_gem_data
	ld a,(PLAYER_GEMS)
	add a,1
	daa
	ld (PLAYER_GEMS),a
	call proc_draw_values_text
proc_check_player_collect_loop_end:
	inc ix
	inc ix
	xor a
	rl d
	ld a,d
	and %00111111
	jr nz, proc_check_player_collect_loop
ret
ENDP

;-------------------------------------------------------------
PROC
proc_check_player_death:
;-------------------------------------------------------------
	ld ix,MONSTER_START
	ld a,(PLAYER_X)
	add a,6
	ld c,a
	ld a,(PLAYER_Y)
	add a,16
	ld b,a
	ld a,(BUG_COUNT)
	ld d,a
	ld a,(WALKER_COUNT)
	add a,d
	cp 0
	jr z,proc_check_player_death_loop_end
	ld d,a
proc_check_player_death_loop:
	push de
	ld de,(PLAYER_POS)
	ld a,(ix)
	cp c
	jr nc,proc_check_player_death_end
	add a,(ix+MONSTER_WIDTH_OFFSET)
	sub 4
	cp e
	jr c,proc_check_player_death_end
	ld a,(ix+1)
	cp b
	jr nc,proc_check_player_death_end
	add a,(ix+MONSTER_HEIGHT_OFFSET)
	sub 4
	cp d
	jr c,proc_check_player_death_end
	ld a,(PLAYER_LIVES)
	dec a
	ld (PLAYER_LIVES),a
	ld a,(PLAYER_ENTRY_X)
	ld (PLAYER_X),a
	ld a,(PLAYER_ENTRY_Y)
	ld (PLAYER_Y),a
	call proc_load_map
	pop de
	jr proc_check_player_death_loop_end
proc_check_player_death_end:
	ld de,MONSTER_SIZE
	add ix,de
	pop de
	dec d
	jr nz,proc_check_player_death_loop
	
proc_check_player_death_loop_end:
ret
ENDP

;-------------------------------------------------------------
PROC
proc_climb_ladder:
;-------------------------------------------------------------
	ld a,(PLAYER_X)
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(PLAYER_Y)
	add a,12
	ld b,a
	push bc
	call proc_get_block_properties
	pop bc
	bit BLOCK_LADDER_BIT,a
	jr nz,proc_climb_ladder_on
	inc c
	push bc
	call proc_get_block_properties
	pop bc
	bit BLOCK_LADDER_BIT,a
	ret z
proc_climb_ladder_on:
	ld a,0
	ld (PLAYER_VEL),a
	
	push bc
	ld bc,&FBFE
	in a,(c)
	bit 1,a
	pop bc
	jr nz, proc_climb_ladder2
	ld a,b
	sub 18
	ld b,a
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	ret nz
	ld a,254
	ld (PLAYER_VEL),a
	ret
proc_climb_ladder2:
	ld a,b
	add a,6
	ld b,a
	call proc_get_block_properties
	bit BLOCK_COLLISION_BIT,a
	ret nz
	ld bc, &FDFE
	in a,(c)
	bit 1,a
	ret nz
	ld a,1
	ld (PLAYER_VEL),a
ret
ENDP

;-------------------------------------------------------------
PROC
proc_update_player:
;-------------------------------------------------------------
	; AFFECTS: hl, de, a, b
	ld bc, &FDFE
	ld d,0
	in a,(c)
	ld (SCRATCH_ADDRESS1),a
	bit 2,a
	ld hl, PLAYER_X
	ld b,(hl)
	call z, proc_move_player_right
	bit 0,a
	call z, proc_move_player_left
proc_update_player_vel:
	ld hl, PLAYER_X
	ld (hl),b
	inc hl
	ld b,(hl)
	inc hl
	ld a,(hl)
	push hl
	ld hl,SWAP_BIT
	add a,(hl)
	pop hl
	
	cp 5
	jr nz, proc_update_player_cap
	ld a,4
proc_update_player_cap:
	push de
	push bc
	push hl
	push af
	add a,1
	ld a,(PLAYER_X)
	add a,4
	rra
	rra
	rra
	and %00011111
	ld c,a	
	ld a,(PLAYER_Y)
	add a,16
	and %11111000
	ld b,a
	call proc_get_block_properties
	ld d,a
	pop af
	ld (SCRATCH_ADDRESS2),a
	bit BLOCK_COLLISION_BIT,d
	jr z, proc_update_player_reset_vel
	pop hl
	pop bc
	ld a,b
	and %11111100
	ld b,a
	push bc
	push hl
	ld a,0
	ld (SCRATCH_ADDRESS2),a
	ld bc,&FBFE
	in a,(c)
	bit 1,a
	jr nz, proc_update_player_reset_vel
	ld a,251
	ld (SCRATCH_ADDRESS2),a
	ld a,1
	ld (SWAP_BIT),a
	
proc_update_player_reset_vel:
	ld a,(SCRATCH_ADDRESS2)
	ld (PLAYER_VEL),a
	call proc_climb_ladder
	ld a,(PLAYER_VEL)
	
	pop hl
	pop bc
	pop de
	ld (hl),a
	cp 127
	jr nc,proc_update_player_skip_reduce
	inc a
	rra
	and %00001111
proc_update_player_skip_reduce:
	dec hl
	add a,b
	ld (hl),a
	
proc_update_player_anim:
	ld hl,PLAYER_ANIM
	ld a,d
	cp 0
	jr nz,proc_update_player_anim_r
	ld (hl),0
	jr proc_update_player_end
proc_update_player_anim_r:
	inc (hl)
	ld a,16
	cp (hl)
	jr nz, proc_update_player_end
	ld (hl),0
proc_update_player_end:
	call proc_move_player_out_walls
	call proc_check_transition
ret
ENDP


;-------------------------------------------------------------
PROC
proc_update_bugs:
;-------------------------------------------------------------
	push ix
	ld ix,MONSTER_X
	ld a,(BUG_COUNT)
	cp 0
	jr z,proc_update_bugs_end
proc_update_bugs_loop:
	push af
	ld a,(ix)
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(ix+4)
	bit 0,a
	jr nz, proc_update_bugs2
	ld a,(ix+1)
	inc a
	ld (ix+1),a
	add a,(ix+MONSTER_HEIGHT_OFFSET)
	inc a
	ld b,a
	jr proc_update_bugs3
proc_update_bugs2:
	ld a,(ix+1)
	dec a
	ld (ix+1),a
	sub 2
	ld b,a
proc_update_bugs3:
	call proc_get_block_properties
	ld a,(hl)
	cp 0
	jr nz, proc_update_bugs4
	ld a,(ix+1)
	cp 1
	jr z, proc_update_bugs4
	cp 127
	jr z, proc_update_bugs4
	jr proc_update_bugs_loop_end
proc_update_bugs4:
	ld a,(ix+4)
	cp 2
	jr nc, proc_update_bugs_reset
	ld b,a
	ld a,1
	sub b
	ld (ix+4),a
	jr proc_update_bugs_loop_end
proc_update_bugs_reset:
	ld a,(ix+MONSTER_Y_OFFSET)
	rra 
	rra 
	rra
	and %00011111
	ld b,a
	ld a,(ix+MONSTER_X_OFFSET)
	rra 
	rra 
	rra
	and %00011111
	ld c,a
	push bc
	call proc_draw_block
	pop bc
	inc b
	call proc_draw_block
	ld a,(ix+4)
	ld (ix+1),a
proc_update_bugs_loop_end
	ld de,MONSTER_SIZE
	add ix,de
	pop af
	dec a
	jr nz,proc_update_bugs_loop
proc_update_bugs_end:
	pop ix
ret
ENDP


;-------------------------------------------------------------
PROC
proc_update_walkers:
;-------------------------------------------------------------
	ld a,(BUG_COUNT)
	rla
	rla
	rla
	ld b,0
	ld c,a
	push ix
	ld ix,MONSTER_POS 
	add ix,bc ; ix now contains the first address of walkers
	ld a,(WALKER_COUNT)
	cp 0
	jr z,proc_update_walkers_loop_end
	ld b,a
proc_update_walkers_loop:
	push bc
	ld a,(ix+4)
	cp 0
	ld a,(ix)
	jr nz, proc_update_walkers_2
	inc a
	ld (ix),a
	add a,(ix+MONSTER_WIDTH_OFFSET)
	sub 7
	jr proc_update_walkers_3 
proc_update_walkers_2:
	dec a
	ld (ix),a
	dec a
proc_update_walkers_3:
	rra
	rra
	rra
	and %00011111
	ld c,a
	cp 0
	jr z, proc_update_walkers_switch
	ld a,(ix+1)
	add a,(ix+MONSTER_HEIGHT_OFFSET)
	sub 7
	ld b,a
	call proc_get_block_index
	ld a,(hl)
	cp 0
	jr z, proc_update_walkers_end
proc_update_walkers_switch:
	ld b,(ix+4)
	ld a,1
	sub b
	ld (ix+4),a
proc_update_walkers_end:
	pop bc
	ld de,MONSTER_SIZE
	add ix,de
	dec b
	jr nz,proc_update_walkers_loop
proc_update_walkers_loop_end:
	

	pop ix
ret
ENDP





;-------------------------------------------------------------
PROC
proc_draw_sprite:
;-------------------------------------------------------------
	;Input: b: y-position, c: x-position, d: sprite attribute ix: sprite address
	;Affects: Everything
	
;Get sprite address from x value
	ld d,(ix)
	
	ld a,c
	exx
	ld b,(ix+SPRITE_HEIGHT_OFFSET)
	and %00000111
	ld h,SPRITE_LOOKUP>>8
	add a,(ix+SPRITE_LOOKUP_OFFSET)
	ld l,a
	ld d,0
	ld e,(hl)
	ld a,(ix+SPRITE_WIDTH_OFFSET)
	ld (SCRATCH_ADDRESS4),a
	add ix,de ;ix now contains the sprite address	
	ld a,b
	rra
	rra
	rra
	inc a
	and %00011111
	ex af,af'
	exx
	ld a,c
	rra
	rra
	rra
	and %00011111
	ld c,a
	
	push bc
	push de
	ld a,b
	rra
	rra
	rra
	and %00011111
	ld b,a
	call proc_get_screen_attribute_address
	pop de
	ld bc,32
	ex af,af'
	ld e,a
proc_draw_sprite_attrib_loop:
	ld a,(SCRATCH_ADDRESS4)
	push hl
proc_draw_sprite_attrib_loop2:
	ld (hl),d
	inc hl
	dec a
	jr nz,proc_draw_sprite_attrib_loop2
	pop hl
	add hl,bc
	dec e
	jr nz,proc_draw_sprite_attrib_loop
	pop bc
	

	ld (SCRATCH_ADDRESS3),ix
	ld de,(SCRATCH_ADDRESS3)
	ld hl,SPRITE_DATA_SIZE
	add hl,de
	ex de,hl
	exx
proc_draw_sprite_loop:
	exx
	push de
	call proc_get_screen_pixel_address
	pop de
	exx
	ld a,(SCRATCH_ADDRESS4)
	ld c,a
proc_draw_sprite_loop2:
	exx
	ld a,(de)
	ld (hl),a
	inc hl
	inc de
	exx
	dec c
	jr nz, proc_draw_sprite_loop2
	exx
	inc b
	exx
	dec b
	jr nz, proc_draw_sprite_loop
ret
ENDP


;-------------------------------------------------------------
PROC
proc_draw_sprites:
;-------------------------------------------------------------
	; AFFECTS: everything
	; Draws player
	

	ld bc,(PLAYER_POS)
	ld ix,(PLAYER_SPRITE)
	ld d,BLACK_PAPER | PURPLE_INK | BRIGHT
	call proc_draw_sprite	
	
	ld iy,MONSTER_X
	ld a,(BUG_COUNT)
	ld b,a
	ld a,(WALKER_COUNT)
	add a,b
	cp 0
	jr z,proc_draw_sprites_bugs_end
	ld b,a
	ld a,0
	ld (SCRATCH_ADDRESS3),a
proc_draw_sprites_loop:
	ld a,b
	push bc
	ld a,(iy)
	ld c,a
	ld a,(iy+1)
	ld b,a
	ld a,(iy+2)
	ld (CURRENT_SPRITE),a
	ld a,(iy+3)
	ld (CURRENT_SPRITE+1),a
	ld ix,(CURRENT_SPRITE)
	ld d,BLACK_PAPER | YELLOW_INK | BRIGHT
	call proc_draw_sprite
	ld bc,MONSTER_SIZE
	add iy,bc
	pop bc
	dec b
	jr nz,proc_draw_sprites_loop
proc_draw_sprites_bugs_end:
ret
ENDP


;-------------------------------------------------------------
PROC
proc_get_block_index:
;-------------------------------------------------------------
    ; IN: b = y-pixel coord (0..191), c: x-cell coord (0..31)
    ; OUT: hl = block address
	; AFFECTS: a,bc,hl
	ld a,b
	and %11111000
	ld b,0
	ld hl,(CURRENT_ROOM_ADDRESS)
	rla
	rl b
	rla
	rl b
	add a,c
	ld c,a
	ld a,0
	adc a,b
	add hl,bc
ret
ENDP	

;-------------------------------------------------------------
PROC
proc_get_block_properties:
;-------------------------------------------------------------
    ; IN: b = y-pixel coord (0..191), c: x-cell coord (0..31)
    ; OUT: a = block properties
	; AFFECTS: a,bc,hl
	call proc_get_block_index
	ld c,(hl)
	ld b,0
	ld hl,DATA_BLOCK_PROPERTIES
	add hl,bc
	ld a,(hl)
ret
ENDP

;-------------------------------------------------------------
PROC
proc_draw_block:
;-------------------------------------------------------------
	; AFFECTS: everything
	call proc_get_screen_attribute_address
	ld (SCRATCH_ADDRESS1),hl
	ld a,b
	ld b,0
	rla
	rla
	rla
	and %11111000
	ld b,a
	call proc_get_screen_pixel_address
	push hl
	call proc_get_block_index
	ld a,(hl) ; Get block number
	ld hl,DATA_BLOCK_ATTRIBS
	push af ; Store block number
	push bc
	ld b,0
	ld c,a
	ld de,(SCRATCH_ADDRESS1)
	add hl,bc
	ld a,(hl)
	ld (de),a
	pop bc
	pop af
	ld bc,0
	rla
	rl b
	rla
	rl b
	rla
	rl b
	ld c,a
	ld hl,BLOCK_0
	add hl,bc
	ld b,h
	ld c,l
	pop hl
	ld d,8
proc_draw_block_loop:
	ld a,(bc)
	ld (hl),a
	inc bc
	push de
	ld de,32*8
	add hl,de
	pop de
	dec d
	jr nz, proc_draw_block_loop
ret
ENDP
	
;-------------------------------------------------------------
PROC
proc_draw_blocks:
;-------------------------------------------------------------
	; AFFECTS: everything
	ld bc,0
proc_draw_blocks_loop:
	push bc
	call proc_draw_block
	pop bc
	inc c
	ld a,32
	cp c
	jr nz,proc_draw_blocks_loop
	ld c,0
	inc b
	ld a,ROOM_HEIGHT
	cp b
	jr nz,proc_draw_blocks_loop
ret
ENDP

;-------------------------------------------------------------
PROC
proc_redraw_blocks:
;-------------------------------------------------------------
	; AFFECTS: everything
	ld bc,(PLAYER_POS)
	ld a,b
	rra
	rra
	rra
	and %00011111
	ld b,a
	ld a,c
	rra
	rra
	rra
	and %00011111
	ld c,a
	push bc
	call proc_draw_block
	pop bc
	inc c
	push bc
	call proc_draw_block
	pop bc
	inc b
	push bc
	call proc_draw_block
	pop bc
	dec c
	push bc
	call proc_draw_block
	pop bc
	inc b
	push bc
	call proc_draw_block
	pop bc
	inc c
	call proc_draw_block
	
	ld iy,MONSTER_START
	ld a,(BUG_COUNT)
	cp 0
	jr z, proc_redraw_blocks_bugs_end
	ld b,a
proc_redraw_blocks_loop:
	push bc
	ld a,(iy)
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(iy+1)
	dec a
	ld b,a
	ld a,(iy+4)
	bit 0,a
	jr z,proc_redraw_blocks2
	ld a,b
	add a,(iy+MONSTER_HEIGHT_OFFSET)
	inc a
	ld b,a
proc_redraw_blocks2:
	push bc
	call proc_get_block_index
	pop bc
	ld (CURRENT_SPRITE),hl
	ld ix,(CURRENT_SPRITE)
	call proc_get_screen_pixel_address
	ld d,(iy+MONSTER_BWIDTH_OFFSET)
proc_redraw_blocks2_inner:
	ld a,(ix)
	ld (hl),a
	inc ix
	inc hl
	dec d
	jr nz,proc_redraw_blocks2_inner
	ld de,MONSTER_SIZE
	add iy,de
	pop bc
	dec b
	jr nz,proc_redraw_blocks_loop
proc_redraw_blocks_bugs_end:
	ld a,(WALKER_COUNT)
	cp 0
	jr z,proc_redreaw_blocks_walkers_end
	ld b,a
proc_redraw_blocks_loop2:
	push bc
	ld a,(iy)
	and %00000111
	jr nz, proc_redraw_blocks_loop2_end
	ld a,(iy)
	dec a
	rra
	rra
	rra
	and %00011111
	ld c,a
	ld a,(iy+1)
	rra
	rra
	rra
	and %00011111
	ld b,a
	inc b
	push bc
	call proc_draw_block
	pop bc
	inc b
	call proc_draw_block
proc_redraw_blocks_loop2_end:
	pop bc
	ld de,MONSTER_SIZE
	add iy,de
	dec b
	jr nz,proc_redraw_blocks_loop2
proc_redreaw_blocks_walkers_end:
ret
ENDP

;-------------------------------------------------------------
PROC
proc_draw_gems:
;-------------------------------------------------------------
	; AFFECTS: everything
	push iy
	push ix
	
	ld a,(GEM_COLOR)
	inc a
	and %00000111
	jr nz,proc_draw_gems2
	inc a
proc_draw_gems2:
	or BLACK_PAPER
	ld (GEM_COLOR),a
	
	ld ix,CURRENT_ROOM_GEMS
	ld b,6
proc_draw_gems_loop:
	push bc
	ld a,$FF
	cp (ix)
	jr z, proc_draw_gems_loop_end
	ld b,(ix+1)
	ld c,(ix)
	push bc
	ld a,b
	rra
	rra
	rra
	and %00011111
	ld b,a
	call proc_get_screen_attribute_address
	ld a, (GEM_COLOR)
	ld (hl),a
	pop bc
	call proc_get_screen_pixel_address
	ld de, 32*8
	ld b,8
	ld iy,DATA_GEM
proc_draw_gems_loop2:
	ld a,(iy)
	ld (hl),a
	inc iy
	add hl,de
	dec b
	jr nz,proc_draw_gems_loop2
proc_draw_gems_loop_end:
	inc ix
	inc ix
	pop bc
	dec b
	jr nz, proc_draw_gems_loop
	
	pop ix
	pop iy
ret
ENDP
	
;-------------------------------------------------------------
PROC
proc_set_gem_data:
;-------------------------------------------------------------
	; AFFECTS: a, bc, hl
	ld b,0
	ld a,(CURRENT_ROOM_NUMBER)
	ld c,a
	ld hl,COLLECTED_GEMS
	add hl,bc
	ld a,(hl) ; a contains gem bits and such
	ld c,6
	ld hl,CURRENT_ROOM_GEMS
proc_set_gem_loop:
	bit 0,a
	jr z,proc_set_gem_loop_end
	ld (hl),$FF
proc_set_gem_loop_end:
	inc l
	inc l
	rra
	dec c
	jr nz,proc_set_gem_loop
ret
ENDP

;-------------------------------------------------------------
PROC
proc_draw_text:
;-------------------------------------------------------------
	; Input: b: y-position, c: x-cell, a: character
	; AFFECTS: everything
	ld d,0
	rla
	rl d
	rla
	rl d
	rla
	rl d
	and %11111000
	ld e,a
	ld ix,$3D00
	add ix,de
	call proc_get_screen_pixel_address
	ld b,8
	ld de,32*8
proc_draw_text_loop:
	ld a,(ix)
	ld (hl),a
	inc ix
	add hl,de
	dec b
	jr nz,proc_draw_text_loop
ret
ENDP

;-------------------------------------------------------------
PROC
proc_draw_string:
;-------------------------------------------------------------
	; Input: b: y-position, c: x-cell, hl: string address
	; AFFECTS: everything
	ld a,(hl)
	cp 0
	ret z
	push hl
	push bc
	cp CHAR_SPACE
	call nz, proc_draw_text
	pop bc
	pop hl
	inc hl
	inc c
	jr proc_draw_string
ENDP


;-------------------------------------------------------------
PROC
proc_draw_values_text:
;-------------------------------------------------------------
	ld a,(PLAYER_GEMS)
	and $0F
	add a,CHAR_ZERO
	ld (PLAYER_GEM_TEXT+1),a
	ld a,(PLAYER_GEMS)
	rra
	rra
	rra
	rra
	and $0F
	add a,CHAR_ZERO
	ld (PLAYER_GEM_TEXT),a
	
	ld bc,$A003
	ld hl,DATA_LIVES_STRING
	call proc_draw_string
	inc hl
	ld c, 20
	call proc_draw_string
ret
ENDP

;-------------------------------------------------------------
PROC
proc_load_map:
;-------------------------------------------------------------
	; Input: None
	; AFFECTS: everything	
	ld a,(PLAYER_X)
	ld (PLAYER_ENTRY_X),a
	ld a,(PLAYER_Y)
	ld (PLAYER_ENTRY_Y),a
	
	xor a
	ld hl, $50C0
	ld bc,$0820
	ld de,32*7
proc_load_map_loop:
	ld (hl),a
	inc hl
	dec c
	jr nz,proc_load_map_loop
	ld c,32
	add hl,de
	dec b
	jr nz,proc_load_map_loop
	
	ld hl,$5A40
	ld bc,$0100
	ld a,WHITE_INK | BLUE_PAPER
proc_load_map_loop_fill:	
	ld (hl),a
	inc hl
	dec c
	jr nz,proc_load_map_loop_fill
	dec b
	jr nz,proc_load_map_loop_fill
	
	ld b,0
	ld a,(CURRENT_ROOM_NUMBER)
	rla
	and ROOM_BITS << 1
	ld c,a
	ld hl,DATA_ROOM_LIST
	add hl,bc
	ld b,(hl)
	inc hl
	ld c,(hl)
	;ld (CURRENT_ROOM_ADDRESS),bc

	
	ld de,ROOM_START
	ld (CURRENT_ROOM_ADDRESS),de
proc_load_map_loop2:
	ld a,(bc)
	cp $FF
	jr z,proc_load_map_loop2_end
	ld h,a
	inc bc
	ld a,(bc)
proc_load_map_loop3:
	ld (de),a
	inc de
	dec h
	jr nz,proc_load_map_loop3
	inc bc
	jr proc_load_map_loop2
proc_load_map_loop2_end:
	inc bc
	push bc
	call proc_draw_blocks
	pop hl
	;ld bc,ROOM_SIZE
	;add hl,bc
	ld a,(hl)
	ld de,MONSTER_START
	ld (BUG_COUNT),a
	ld b,a
	inc hl
	ld a,(hl)
	ld (WALKER_COUNT),a
	add a,b
	
	inc hl
	cp 0
	jr z,proc_load_map_loop4_end
proc_load_map_loop4:
	ex af,af'
	ld bc,2
	ldir
	ld a,(hl)
	ld (de),a
	ld c,a
	inc hl
	inc de
	ld a,(hl)
	ld (de),a
	ld b,a
	inc hl
	inc de
	ld a,(hl)
	ld (de),a
	inc hl
	inc de
	
	inc bc
	inc bc
	ld a,(bc)
	ld (de),a
	inc de
	rla
	rla
	rla
	ld (de),a
	inc bc
	inc de
	ld a,(bc)
	ld (de),a
	inc de
	ex af,af'
	dec a
	jr nz,proc_load_map_loop4
proc_load_map_loop4_end:
	ld bc,$B001
	call proc_draw_string
	inc hl
	ld bc,12
	ld de,CURRENT_ROOM_GEMS
	ldir
	
	ld a,(CURRENT_ROOM_NUMBER)
	cp 8
	jr nz,proc_load_map5
	ld hl,ROOM_8_TEXT
	ld bc,$2813
	call proc_draw_string
	inc hl
	ld bc,$3811
	call proc_draw_string
	inc hl
	ld bc,$4813
	call proc_draw_string
	inc hl
	ld bc,$5810
	call proc_draw_string
proc_load_map5:
	call proc_set_gem_data
	call proc_draw_values_text
	
	
ret
ENDP

;-------------------------------------------------------------
PROC
proc_play_sound:
;-------------------------------------------------------------
	di
	ld hl,soundstart
	ld d,%00010000
soundloop:	
	ld b,(hl) ; 7
	ld e,8 ; 7
bitloop:
	ld a,b ; 4
	and d ; 4
	out ($FE),a ; 11
	ld c,$1C ; 7
stall:
	dec c ; 4
	jr nz,stall ; 12/7
	rrc b ; 8
	dec e ; 4
	jr z,bitloopend ; 12/7
	ld c,$01 ; 7
stall2:
	dec c ; 4
	jr z,bitloop ; 12/7 
	jr stall2 ; 12/7
bitloopend:
	inc hl ; 6
	ld a,soundend ; 7
	cp l ; 4
	jr nz,soundloop ; 12/7	
	ld a,soundend>>8 ; 7
	cp h ; 4
	jr nz,soundloop ; 12/7
	ei
ret
ENDP



org $8000
;==============================================================
; Initialization
;==============================================================
start:
	ld a, BLUE_PAPER | WHITE_INK
    call proc_fill_screen_attribute
	
	call proc_play_sound
	
	ld hl, PLAYER_POS
	ld a, 124
	ld (hl),a
	ld a, 100
	inc hl
	ld (hl),a
	xor a
	ld (PLAYER_GEMS),a
	inc hl
	ld (hl),a
	ld hl, PLAYER_ANIM
	ld (hl),a
	ld hl, DATA_ZIGGY_RIGHT
	ld (PLAYER_SPRITE), hl
	ld hl, CURRENT_ROOM_NUMBER
	ld (hl),35
	ld a,CHAR_ZERO+3
	ld (PLAYER_LIVES),a
	
	ld hl,COLLECTED_GEMS
	xor a
	ld b,64
start_reset_loop:
	ld (hl),a
	inc hl
	dec b
	jr nz,start_reset_loop
	ld a,$FF
	ld (COLLECTED_GEMS+35),a
	
	call proc_load_map
loopyboy:
	ei
	halt
	halt
	di
	call proc_redraw_blocks	
	call proc_update_player
	call proc_draw_sprites
	call proc_draw_gems
	call proc_update_bugs
	call proc_update_walkers
	call proc_check_player_collect
	call proc_check_player_death
	ld a,(SWAP_BIT)
	xor %00000001
	ld (SWAP_BIT),a
	
	;The code below gives a reliable way to prevent flickering at the cost of a frame
	;ei
	;halt
	;di
	;ld bc,$6A0
;gameloopstall:
	;dec bc
	;ld a,0
	;cp b
	;jr nz,gameloopstall

	
	ld a,(PLAYER_LIVES)
	cp CHAR_ZERO-1
	jr nz,loopyboy
	jr start
ret
end start

